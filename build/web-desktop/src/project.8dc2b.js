require=function t(e,i,o){function r(c,n){if(!i[c]){if(!e[c]){var a="function"==typeof require&&require;if(!n&&a)return a(c,!0);if(s)return s(c,!0);var p=new Error("Cannot find module '"+c+"'");throw p.code="MODULE_NOT_FOUND",p}var h=i[c]={exports:{}};e[c][0].call(h.exports,function(t){var i=e[c][1][t];return r(i||t)},h,h.exports,t,e,i,o)}return i[c].exports}for(var s="function"==typeof require&&require,c=0;c<o.length;c++)r(o[c]);return r}({BrickBall:[function(t,e,i){"use strict";cc._RF.push(e,"695b581X8JE+455NQwB9qyS","BrickBall"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,s=(o.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.brickScene=null,e}return __extends(e,t),e.prototype.init=function(t){this.brickScene=t,this.node.position=cc.v2(360,270),this.getComponent(cc.RigidBody).linearVelocity=cc.v2(800,800)},e.prototype.onBeginContact=function(t,e,i){switch(i.tag){case 1:this.brickScene.onBallContactBrick(e.node,i.node);break;case 2:this.brickScene.onBallContactGround(e.node,i.node);break;case 3:this.brickScene.onBallContactPaddle(e.node,i.node);break;case 4:this.brickScene.onBallContactWall(e.node,i.node)}},e=__decorate([r],e)}(cc.Component));i.BrickBall=s,cc._RF.pop()},{}],BrickColor:[function(t,e,i){"use strict";cc._RF.push(e,"fd659ijKY1FVbW2vtuTNQfM","BrickColor"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,s=o.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.brickSprite=null,e.picList=[],e}return __extends(e,t),e.prototype.start=function(){var t=Math.random()*this.picList.length|0;this.brickSprite.spriteFrame=this.picList[t]},__decorate([s(cc.Sprite)],e.prototype,"brickSprite",void 0),__decorate([s([cc.SpriteFrame])],e.prototype,"picList",void 0),e=__decorate([r],e)}(cc.Component);i.BrickColor=c,cc._RF.pop()},{}],BrickLayout:[function(t,e,i){"use strict";cc._RF.push(e,"1b69bBWKdlMDpJ3ExSopM/4","BrickLayout"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,s=o.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.padding=0,e.spacing=0,e.colNum=0,e.brickPrefab=null,e.brickNum=0,e}return __extends(e,t),e.prototype.init=function(t){this.node.removeAllChildren(),this.brickNum=t;for(var e=0;e<this.brickNum;e++){var i=cc.instantiate(this.brickPrefab);i.parent=this.node,i.x=this.padding+e%this.colNum*(i.width+this.spacing)+i.width/2,i.y=-this.padding-Math.floor(e/this.colNum)*(i.height+this.spacing)-i.height/2}},__decorate([s(cc.Float)],e.prototype,"padding",void 0),__decorate([s(cc.Float)],e.prototype,"spacing",void 0),__decorate([s(cc.Integer)],e.prototype,"colNum",void 0),__decorate([s(cc.Prefab)],e.prototype,"brickPrefab",void 0),__decorate([s(cc.Integer)],e.prototype,"brickNum",void 0),e=__decorate([r],e)}(cc.Component);i.BrickLayout=c,cc._RF.pop()},{}],BrickPaddle:[function(t,e,i){"use strict";cc._RF.push(e,"21d56KpJ3FBQL2sth9PNm1+","BrickPaddle"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,s=(o.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.node.parent.on(cc.Node.EventType.TOUCH_MOVE,function(e){var i=t.node.parent.convertToNodeSpace(e.getLocation());t.node.x=i.x})},e.prototype.init=function(){this.node.x=360},e=__decorate([r],e)}(cc.Component));i.BrickPaddle=s,cc._RF.pop()},{}],BrickScene:[function(t,e,i){"use strict";cc._RF.push(e,"ce000bUU0NAbL2c+4Z/4nRf","BrickScene"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./BrickBall"),r=t("./BrickPaddle"),s=t("./BrickLayout"),c=t("../G"),n=cc._decorator,a=n.ccclass,p=n.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ball=null,e.paddle=null,e.layout=null,e.scoreLabel=null,e.brickNum=50,e.score=0,e.physicsManager=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.physicsManager=cc.director.getPhysicsManager(),this.startGame()},e.prototype.init=function(){this.score=0,this.scoreLabel.string="0",this.brickNum=50,this.physicsManager.enabled=!0,this.ball.init(this),this.paddle.init(),this.layout.init(this.brickNum)},e.prototype.startGame=function(){this.init()},e.prototype.pauseGame=function(){this.physicsManager.enabled=!1},e.prototype.resumeGame=function(){this.physicsManager.enabled=!0},e.prototype.stopGame=function(){var t=this;this.physicsManager.enabled=!1,c.G.gameRoot.showMaskMessage("游戏结束",{label:"再来一局",cb:function(){t.startGame()},target:this},{label:"返回大厅",cb:function(){c.G.returnHall()},target:this})},e.prototype.addScore=function(t){this.score+=t},e.prototype.minusBrick=function(t){this.brickNum-=t},e.prototype.onBallContactBrick=function(t,e){e.parent=null,this.addScore(1),this.minusBrick(1),this.scoreLabel.string=this.score+"",this.brickNum<=0&&this.stopGame()},e.prototype.onBallContactGround=function(t,e){this.stopGame()},e.prototype.onBallContactPaddle=function(t,e){},e.prototype.onBallContactWall=function(t,e){},e.prototype.onDestroy=function(){this.physicsManager.enabled=!1},__decorate([p(o.BrickBall)],e.prototype,"ball",void 0),__decorate([p(r.BrickPaddle)],e.prototype,"paddle",void 0),__decorate([p(s.BrickLayout)],e.prototype,"layout",void 0),__decorate([p(cc.Label)],e.prototype,"scoreLabel",void 0),e=__decorate([a],e)}(cc.Component);i.BrickScene=h,cc._RF.pop()},{"../G":"G","./BrickBall":"BrickBall","./BrickLayout":"BrickLayout","./BrickPaddle":"BrickPaddle"}],ChessManager:[function(t,e,i){"use strict";cc._RF.push(e,"4a159FP+35HOptZDqf9vljL","ChessManager");var o=t("Constants"),r=o.CHESS_TYPE,s=o.STAND,c=o.GAME_STATE,n=t("../G");t("../reversi/ReversiBoard");cc.Class({extends:cc.Component,properties:{COL:8,ROW:8,chessPrefab:cc.Prefab,graphics:cc.Graphics,chesses:[],tileWidth:cc.number=0,startX:cc.number=0,startY:cc.number=0,boardWidth:cc.number=0,boardHeight:cc.number=0,blackEffect:cc.Node,whiteEffect:cc.Node,blackNode:cc.Node,whiteNode:cc.Node},onLoad:function(){n.G.chessManager=this,this.chessWidth=this.node.width/(this.COL+1);for(var t=0;t<this.COL+1;t++){this.chesses[t]=[];for(var e=0;e<this.ROW+1;e++){var i=cc.instantiate(this.chessPrefab);i.parent=this.node,i.width=this.chessWidth-5,i.height=this.chessWidth-5,i.position=cc.p((t+1)*this.chessWidth,(e+1)*this.chessWidth);var o=i.getComponent("Chess");o.coor=cc.p(t,e),this.chesses[t][e]=o,this.addTouchEvent(o)}}this.chesses[3][3].type=r.BLACK,this.chesses[3][4].type=r.WHITE,this.chesses[4][4].type=r.BLACK,this.chesses[4][3].type=r.WHITE,n.G.gameManager.startGame(),this.showEffect(),this.showYou();var s=this;n.G.roomSocket.on("update chessboard",function(t){s.fallChess(s.chesses[t.x][t.y])}),n.G.roomSocket.on("change turn",function(){n.G.gameManager.changeTurn()}),n.G.roomSocket.on("force change turn",function(){n.G.gameManager.forceChangeTurn()}),n.G.roomSocket.on("player leave",function(){n.G.gameManager.playerLeave()}),this.tileWidth=this.node.width/(this.COL+1),this.startX=this.tileWidth/2,this.startY=this.tileWidth/2,this.boardWidth=this.tileWidth*this.COL,this.boardHeight=this.tileWidth*this.ROW,this.graphics.clear(),this.graphics.strokeColor=cc.Color.BLACK;for(var c=0;c<this.COL+1;c++)this.graphics.moveTo(this.startX+c*this.tileWidth,this.startY),this.graphics.lineTo(this.startX+c*this.tileWidth,this.startY+this.boardHeight),this.graphics.stroke();for(var a=0;a<this.ROW+1;a++)this.graphics.moveTo(this.startX,this.startY+a*this.tileWidth),this.graphics.lineTo(this.startX+this.boardWidth,this.startY+a*this.tileWidth),this.graphics.stroke()},addTouchEvent:function(t){var e=this;t.node.on("touchend",function(i){if(n.G.gameManager.gameState===c.PLAYING)if(n.G.gameManager.turn===n.G.stand)if(t.type===r.NONE)for(var o=1;o<=8;o++){if(e.judgePass(n.G.gameManager.turn,t,o)){e.fallChess(t),n.G.roomSocket.emit("update chessboard",t.coor);break}if(8===o)return void n.G.gameRoot.showTip("不能下在这里哦")}else n.G.gameRoot.showTip("这里有子了");else n.G.gameRoot.showTip("别心急，还没轮到你");else n.G.gameRoot.showTip("游戏已经结束")})},fallChess:function(t){n.G.gameManager.turn===s.BLACK?t.type=r.BLACK:n.G.gameManager.turn===s.WHITE&&(t.type=r.WHITE);for(var e=1;e<=8;e++)this.judgePass(n.G.gameManager.turn,t,e)&&this.changePass(t,e);n.G.gameManager.updateScore(),n.G.gameManager.changeTurn(),this.judgeWin()},showEffect:function(){n.G.gameManager.turn===s.BLACK?(this.blackEffect.active=!0,this.whiteEffect.active=!1):n.G.gameManager.turn===s.WHITE&&(this.blackEffect.active=!1,this.whiteEffect.active=!0)},showYou:function(){n.G.stand===s.BLACK?(this.blackNode.active=!0,this.whiteNode.active=!1):n.G.stand===s.WHITE&&(this.blackNode.active=!1,this.whiteNode.active=!0)},nearChess:function(t,e){switch(e){case 1:if(0!==t.coor.x)return this.chesses[t.coor.x-1][t.coor.y];break;case 2:if(0!==t.coor.x&&t.coor.y!==this.ROW-1)return this.chesses[t.coor.x-1][t.coor.y+1];break;case 3:if(t.coor.y!==this.ROW-1)return this.chesses[t.coor.x][t.coor.y+1];break;case 4:if(t.coor.x!==this.COL-1&&t.coor.y!==this.ROW-1)return this.chesses[t.coor.x+1][t.coor.y+1];break;case 5:if(t.coor.x!==this.COL-1)return this.chesses[t.coor.x+1][t.coor.y];break;case 6:if(t.coor.x!==this.COL-1&&0!==t.coor.y)return this.chesses[t.coor.x+1][t.coor.y-1];break;case 7:if(0!==t.coor.y)return this.chesses[t.coor.x][t.coor.y-1];break;case 8:if(0!==t.coor.x&&0!==t.coor.y)return this.chesses[t.coor.x-1][t.coor.y-1]}return null},judgePass:function(t,e,i){var o=e;if(null===(o=this.nearChess(e,i)))return!1;for(;o.type===-t;){if(null===(o=this.nearChess(o,i)))return!1;if(o.type===t)return!0}return!1},changePass:function(t,e){for(var i=this.nearChess(t,e);i.type===-n.G.gameManager.turn;)i.type=t.type,i=this.nearChess(i,e)},judgeMoveAble:function(t){for(var e=null,i=0;i<this.COL;i++)for(var o=0;o<this.ROW;o++)if((e=this.chesses[i][o]).type===r.NONE)for(var s=1;s<=8;s++)if(this.judgePass(t,e,s))return!0;return!1},judgeWin:function(){var t=this.judgeMoveAble(n.G.gameManager.turn),e=this.judgeMoveAble(-n.G.gameManager.trun);t||(!t&&e?(cc.log("can not move next turn"),n.G.gameManager.forceChangeTurn(),n.G.roomSocket.emit("force change turn")):t||e||(cc.log("both can not move someone win"),n.G.gameManager.endGame()))},getChessCount:function(){for(var t=0,e=0,i=0;i<this.chesses.length;i++)for(var o=0;o<this.chesses[i].length;o++)this.chesses[i][o].type===r.BLACK?t++:this.chesses[i][o].type===r.WHITE&&e++;return[t,e]}}),cc._RF.pop()},{"../G":"G","../reversi/ReversiBoard":"ReversiBoard",Constants:"Constants"}],Chess:[function(t,e,i){"use strict";cc._RF.push(e,"038ecKdx7hAFbMdQrCbLy4q","Chess");var o=t("Constants").CHESS_TYPE;cc.Class({extends:cc.Component,properties:{pics:{default:[],type:[cc.SpriteFrame]},_type:o.NONE,type:{get:function(){return this._type},set:function(t){this._type=t,t===o.BLACK?this.getComponent(cc.Sprite).spriteFrame=this.pics[0]:t===o.WHITE?this.getComponent(cc.Sprite).spriteFrame=this.pics[1]:this.getComponent(cc.Sprite).spriteFrame=null}},coor:cc.p(0,0),chance:0},onLoad:function(){this.type=o.NONE}}),cc._RF.pop()},{Constants:"Constants"}],Constants:[function(t,e,i){"use strict";cc._RF.push(e,"d07ad0dAzpNWY0U+xAGojqI","Constants");var o=cc.Enum({BLACK:47,WHITE:-47}),r=cc.Enum({NONE:-1,BLACK:47,WHITE:-47}),s=cc.Enum({PREPARE:-1,PLAYING:-1,OVER:-1}),c=cc.Enum({LEFT:-1,LEFT_UP:-1,UP:-1,RIGHT_UP:-1,RIGHT:-1,RIGHT_DOWN:-1,DOWN:-1,LEFT_DOWN:-1});e.exports={STAND:o,CHESS_TYPE:r,GAME_STATE:s,DIR:c},cc._RF.pop()},{}],GameManager:[function(t,e,i){"use strict";cc._RF.push(e,"77bad3pHXtP57DUZV/GIeaX","GameManager");var o=t("Constants"),r=o.GAME_STATE,s=o.STAND,c=(o.CHESS_TYPE,t("../G"));cc.Class({extends:cc.Component,properties:{gameState:{default:r.PREPARE,type:r},turn:{default:s.BLACK,type:s},blackScoreLabel:cc.Label,whiteScoreLabel:cc.Label},onLoad:function(){c.G.gameManager=this},startGame:function(){this.turn=s.BLACK,this.gameState=r.PLAYING,this.showInfo("start game")},endGame:function(){this.gameState=r.OVER,this.showInfo("game over")},changeTurn:function(){this.turn===s.BLACK?this.turn=s.WHITE:this.turn===s.WHITE&&(this.turn=s.BLACK),c.G.chessManager.showEffect()},forceChangeTurn:function(){this.showInfo("force change turn"),this.changeTurn()},playerLeave:function(){this.showInfo("player Leave")},updateScore:function(){var t=c.G.chessManager.getChessCount(),e=t[0],i=t[1];this.blackScoreLabel.string=e+"",this.whiteScoreLabel.string=i+""},showInfo:function(t){var e=c.G.chessManager.getChessCount(),i=e[0],o=e[1];"start game"===t?(c.G.stand===s.BLACK?c.G.gameRoot.showTip("你是蓝色方\n执黑棋先手"):c.G.stand===s.WHITE&&c.G.gameRoot.showTip("你是红色方\n执白棋后手"),this.blackScoreLabel.string=i+"",this.whiteScoreLabel.string=o+""):"game over"===t?i>o?c.G.gameRoot.showTip("游戏结束\n黑棋胜"):i<o?c.G.gameRoot.showTip("游戏结束\n白棋胜"):i===o&&c.G.gameRoot.showTip("游戏结束\n平局"):"force change turn"===t?c.G.stand===s.BLACK?c.G.gameRoot.showTip("黑方无子可下\n请白方下子"):c.G.stand===s.WHITE&&c.G.gameRoot.showTip("白方无子可下\n请黑方下子"):"player Leave"==t&&(c.G.gameRoot.showMaskMessage("你的对手离开了游戏\n你赢啦！",{label:"朕知道了",cb:function(){},target:this}),this.gameState=r.OVER)},onBtnReurn:function(){c.G.returnHall(),c.G.roomSocket.disconnect()},onBtnRestart:function(){this.startGame(),c.G.roomSocket.disconnect()}}),cc._RF.pop()},{"../G":"G",Constants:"Constants"}],GameRoot:[function(t,e,i){"use strict";cc._RF.push(e,"a370bXtLwVLZ7lyzdETAio/","GameRoot"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,s=o.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maskPanel=null,e.messageLabel=null,e.messageBtn1=null,e.messageBtn2=null,e.tipPanel=null,e.tipLabel=null,e}return __extends(e,t),e.prototype.showMaskMessage=function(t,e,i){var o=this;this.messageLabel.string=t,this.maskPanel.active||(this.maskPanel.active=!0),e?(this.messageBtn1.active=!0,this.messageBtn1.getComponent(cc.Label).string=e.label,this.messageBtn1.once(cc.Node.EventType.TOUCH_END,function(){o.hideMaskMessage(),e.cb&&e.cb()},e.target)):this.messageBtn1.active=!1,i?(this.messageBtn2.active=!0,this.messageBtn2.getComponent(cc.Label).string=i.label,this.messageBtn2.once(cc.Node.EventType.TOUCH_END,function(){o.hideMaskMessage(),i.cb&&i.cb()},i.target)):this.messageBtn2.active=!1},e.prototype.hideMaskMessage=function(){this.maskPanel.active=!1},e.prototype.showTip=function(t){this.tipPanel.active=!0,this.tipLabel.string=t,this.tipPanel.getComponent(cc.Animation).play()},__decorate([s(cc.Node)],e.prototype,"maskPanel",void 0),__decorate([s(cc.Label)],e.prototype,"messageLabel",void 0),__decorate([s(cc.Node)],e.prototype,"messageBtn1",void 0),__decorate([s(cc.Node)],e.prototype,"messageBtn2",void 0),__decorate([s(cc.Node)],e.prototype,"tipPanel",void 0),__decorate([s(cc.Label)],e.prototype,"tipLabel",void 0),e=__decorate([r],e)}(cc.Component);i.GameRoot=c,cc._RF.pop()},{}],Get47Board:[function(t,e,i){"use strict";cc._RF.push(e,"4e746t6FElNd7L0fGocCm7k","Get47Board"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./Get47Piece"),r=t("./Get47Constants"),s=cc._decorator,c=s.ccclass,n=s.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.colsNum=7,e.rowsNum=7,e.padding=5,e.spacing=5,e.piecePrefab=null,e.get47Scene=null,e.runningAction=!1,e.score=0,e.inputDir=0,e}return __extends(e,t),e.prototype.init=function(t){this.get47Scene=t,this.pieceWidth=(this.node.width-2*this.padding-this.spacing*(this.colsNum-1))/this.colsNum},e.prototype.reset=function(){this.node.removeAllChildren(),this.pieceMap=[];for(var t=0;t<this.colsNum;t++){this.pieceMap[t]=[];for(var e=0;e<this.rowsNum;e++){var i=cc.instantiate(this.piecePrefab);this.node.addChild(i),i.width=this.pieceWidth,i.height=this.pieceWidth,i.position=cc.p(this.padding+t*(this.pieceWidth+this.spacing),this.padding+e*(this.pieceWidth+this.spacing));var r=i.getComponent(o.Piece);r.init(t,e),this.addTouchEvent(r),this.pieceMap[t][e]=r}}this.deletePieces()},e.prototype.addTouchEvent=function(t){var e=this,i=function(i){if(!e.runningAction){var o,s=i.getStartLocation(),c=i.getLocation();o=Math.abs(c.x-s.x)>Math.abs(c.y-s.y)?c.x>s.x?r.DIR.RIGHT:r.DIR.LEFT:c.y>s.y?r.DIR.UP:r.DIR.DOWN,e.inputDir=0,e.get47Scene.onPieceTouch(t,o)}};t.node.on(cc.Node.EventType.TOUCH_END,i,this),t.node.on(cc.Node.EventType.TOUCH_CANCEL,i,this)},e.prototype.tryExchange=function(t,e){var i=this,o=this.getNeighborPiece(t,e);if(null!==o){this.runningAction=!0,this.exchangeTwoPiecesState(t,o);var r=this.getHorizontalLines(),s=this.getVerticalLines();if(r.length+s.length>0){this.exchangeTwoPiecesPosIndex(t,o);var c=0,n=cc.sequence(cc.moveTo(.15,t.posIndex),cc.callFunc(function(){2===++c&&(i.runningAction=!1,i.deletePieces())})),a=cc.sequence(cc.moveTo(.15,o.posIndex),cc.callFunc(function(){2===++c&&(i.runningAction=!1,i.deletePieces())}));t.node.runAction(n),o.node.runAction(a)}else{this.exchangeTwoPiecesState(t,o);var p=0,h=t.node.position,u=o.node.position;n=cc.sequence(cc.moveTo(.1,u),cc.moveTo(.1,h),cc.callFunc(function(){2===++p&&(i.runningAction=!1)})),a=cc.sequence(cc.moveTo(.1,h),cc.moveTo(.1,u),cc.callFunc(function(){2===++p&&(i.runningAction=!1)}));t.node.runAction(n),o.node.runAction(a)}}},e.prototype.exchangeTwoPiecesState=function(t,e){var i,o;this.pieceMap[t.x][t.y]=e,this.pieceMap[e.x][e.y]=t,i=[e.x,t.x],t.x=i[0],e.x=i[1],o=[e.y,t.y],t.y=o[0],e.y=o[1]},e.prototype.exchangeTwoPiecesPosIndex=function(t,e){var i;i=[e.posIndex,t.posIndex],t.posIndex=i[0],e.posIndex=i[1]},e.prototype.deletePieces=function(){var t=this;this.runningAction=!0;var e=this.getHorizontalLines(),i=this.getVerticalLines();if(e.length+i.length!==0){for(var o=0,r=0,s=[],c=0,n=e;c<n.length;c++){var a=n[c];o+=a.type,s.push(a)}for(var p=0,h=i;p<h.length;p++){var u=h[p];r+=u.type,-1===s.indexOf(u)&&s.push(u)}this.inputDir>0?this.get47Scene.updateScore(o+r):this.inputDir<0?this.get47Scene.updateScore(-o-r):this.get47Scene.updateScore(o-r);for(var l=0,d=s.length,f=0;f<d;f++){var y=cc.sequence(cc.scaleTo(.15,0,0),cc.callFunc(function(){++l===d&&(t.runningAction=!1,t.fallPieces())}));s[f].isAlive=!1,s[f].node.runAction(y)}}else this.runningAction=!1},e.prototype.fallPieces=function(){var t=this;this.runningAction=!0;for(var e=!1;!e;){e=!0;for(var i=1;i<this.rowsNum;i++)for(var o=0;o<this.colsNum;o++)this.pieceMap[o][i].isAlive&&!this.pieceMap[o][i-1].isAlive&&(this.exchangeTwoPiecesState(this.pieceMap[o][i],this.pieceMap[o][i-1]),this.exchangeTwoPiecesPosIndex(this.pieceMap[o][i],this.pieceMap[o][i-1]),e=!1)}var r=[];for(o=0;o<this.colsNum;o++)for(i=0;i<this.rowsNum;i++)this.pieceMap[o][i].posIndex!==this.pieceMap[o][i].node.position&&r.push(this.pieceMap[o][i]);for(var s=0,c=r.length,n=0;n<c;n++){var a=cc.sequence(cc.moveTo(.3,r[n].posIndex),cc.callFunc(function(){++s==c&&(t.runningAction=!1,t.addPieces())}));r[n].node.runAction(a)}},e.prototype.addPieces=function(){var t=this;this.runningAction=!0;for(var e=[],i=0;i<this.rowsNum;i++)for(var o=0;o<this.colsNum;o++)this.pieceMap[o][i].isAlive||e.push(this.pieceMap[o][i]);for(var r=0,s=e.length,c=0;c<s;c++){var n=cc.sequence(cc.scaleTo(.15,1,1),cc.callFunc(function(){++r==s&&(t.runningAction=!1,t.deletePieces())}));e[c].randomType(),e[c].isAlive=!0,e[c].node.runAction(n)}},e.prototype.getVerticalLines=function(){for(var t=[],e=1,i=0;i<this.colsNum;i++)for(var o=0;o<this.rowsNum-2;o+=e){var r=this.pieceMap[i][o];e=1;for(var s=o+1;s<this.rowsNum&&this.pieceMap[i][s].type===r.type;s++)e++;if(e>=3)for(var c=0;c<e;c++)t.push(this.pieceMap[i][o+c])}return t},e.prototype.getHorizontalLines=function(){for(var t=[],e=1,i=0;i<this.rowsNum;i++)for(var o=0;o<this.colsNum-2;o+=e){var r=this.pieceMap[o][i].type;e=1;for(var s=o+1;s<this.colsNum&&this.pieceMap[s][i].type===r;s++)e++;if(e>=3)for(var c=0;c<e;c++)t.push(this.pieceMap[o+c][i])}return t},e.prototype.getNeighborPiece=function(t,e){var i=t.x,o=t.y;switch(e){case r.DIR.LEFT:if(i>0)return this.pieceMap[i-1][o];break;case r.DIR.RIGHT:if(i<this.colsNum-1)return this.pieceMap[i+1][o];break;case r.DIR.UP:if(o<this.rowsNum-1)return this.pieceMap[i][o+1];break;case r.DIR.DOWN:if(o>0)return this.pieceMap[i][o-1]}return null},e.prototype.newView=function(t){var e=this;if(void 0===t&&(t=0),this.inputDir=t,!this.runningAction){this.runningAction=!0;for(var i=0,o=0;o<this.colsNum;o++)for(var r=0;r<this.rowsNum;r++){var s=cc.sequence(cc.scaleTo(.3,0,0),cc.callFunc(function(){++i===(e.colsNum-1)*(e.rowsNum-1)&&(e.runningAction=!1,e.addPieces())}));this.pieceMap[o][r].isAlive=!1,this.pieceMap[o][r].node.runAction(s)}}},__decorate([n(cc.Integer)],e.prototype,"colsNum",void 0),__decorate([n(cc.Integer)],e.prototype,"rowsNum",void 0),__decorate([n(cc.Integer)],e.prototype,"padding",void 0),__decorate([n(cc.Integer)],e.prototype,"spacing",void 0),__decorate([n(cc.Prefab)],e.prototype,"piecePrefab",void 0),e=__decorate([c],e)}(cc.Component);i.Get47Board=a,cc._RF.pop()},{"./Get47Constants":"Get47Constants","./Get47Piece":"Get47Piece"}],Get47Constants:[function(t,e,i){"use strict";var o,r;cc._RF.push(e,"13fe4mwiuZGjaCf2paO8sE7","Get47Constants"),Object.defineProperty(i,"__esModule",{value:!0}),(o=i.DIR||(i.DIR={}))[o.LEFT=1]="LEFT",o[o.UP=2]="UP",o[o.RIGHT=3]="RIGHT",o[o.DOWN=4]="DOWN",(r=i.STATE||(i.STATE={}))[r.NONE=0]="NONE",r[r.START=1]="START",r[r.OVER=2]="OVER",cc._RF.pop()},{}],Get47Piece:[function(t,e,i){"use strict";cc._RF.push(e,"fc55f3NtT5G+KpukC6ZPkmK","Get47Piece"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,s=o.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pics=[],e.sprite=null,e.x=0,e.y=0,e.posIndex=cc.v2(),e.isAlive=!0,e._n=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._n},set:function(t){this._n=t,this.sprite.spriteFrame=this.pics[t-1]},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e){this.x=t,this.y=e,this.posIndex=this.node.position,this.randomType(),this.isAlive=!0},e.prototype.randomType=function(){this.type=Math.floor(Math.random()*this.pics.length)+1},__decorate([s([cc.SpriteFrame])],e.prototype,"pics",void 0),__decorate([s(cc.Sprite)],e.prototype,"sprite",void 0),e=__decorate([r],e)}(cc.Component);i.Piece=c,cc._RF.pop()},{}],Get47Scene:[function(t,e,i){"use strict";cc._RF.push(e,"bff9a8PUMtCz7ZHZp5ezQ9T","Get47Scene"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./Get47Board"),r=t("./Get47Constants"),s=t("../G"),c=t("./Get47Score"),n=cc._decorator,a=n.ccclass,p=n.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.board=null,e.score=null,e.target=47,e.state=r.STATE.NONE,e}return __extends(e,t),e.prototype.start=function(){this.board.init(this),this.startGame(),this.addListeners()},e.prototype.startGame=function(){this.state=r.STATE.START,this.board.reset(),this.score.reset(0)},e.prototype.overGame=function(){this.state=r.STATE.OVER,s.G.gameRoot.showMaskMessage("666",{label:"233",cb:function(){},target:this})},e.prototype.updateScore=function(t){this.state===r.STATE.START&&(t>0?this.score.add(t):t<0&&this.score.minus(-t),this.score.num===this.target&&this.overGame())},e.prototype.onPieceTouch=function(t,e){this.state===r.STATE.START&&this.board.tryExchange(t,e)},e.prototype.onBtnReturn=function(){s.G.returnHall()},e.prototype.onBtnRestart=function(){this.startGame()},e.prototype.addListeners=function(){cc.inputManager.setAccelerometerEnabled(!0),cc.systemEvent.on(cc.SystemEvent.EventType.DEVICEMOTION,this.onDeviceMotionEvent,this)},e.prototype.removeListeners=function(){cc.inputManager.setAccelerometerEnabled(!1)},e.prototype.onDeviceMotionEvent=function(t){Math.abs(t.acc.x)>.3&&Math.abs(t.acc.y)>.3&&this.board.newView()},__decorate([p(o.Get47Board)],e.prototype,"board",void 0),__decorate([p(c.Score)],e.prototype,"score",void 0),__decorate([p(cc.Integer)],e.prototype,"target",void 0),e=__decorate([a],e)}(cc.Component);i.Get47Scene=h,cc._RF.pop()},{"../G":"G","./Get47Board":"Get47Board","./Get47Constants":"Get47Constants","./Get47Score":"Get47Score"}],Get47Score:[function(t,e,i){"use strict";cc._RF.push(e,"51bd5D4aHJO/be6iKwDn88G","Get47Score"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,s=o.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scoreLabel=null,e.addLabel=null,e.minusLabel=null,e.anim=null,e.num=0,e}return __extends(e,t),e.prototype.reset=function(t){this.num=t,this.scoreLabel.string=t+""},e.prototype.add=function(t){this.num+=t,this.scoreLabel.string=this.num+"",this.addLabel.string="+"+t,this.anim.play("add")},e.prototype.minus=function(t){this.num-=t,this.scoreLabel.string=this.num+"",this.minusLabel.string="-"+t,this.anim.play("minus")},__decorate([s(cc.Label)],e.prototype,"scoreLabel",void 0),__decorate([s(cc.Label)],e.prototype,"addLabel",void 0),__decorate([s(cc.Label)],e.prototype,"minusLabel",void 0),__decorate([s(cc.Animation)],e.prototype,"anim",void 0),e=__decorate([r],e)}(cc.Component);i.Score=c,cc._RF.pop()},{}],GobangAI:[function(t,e,i){"use strict";cc._RF.push(e,"718e4R2i4ZJIo5PjMMgEagd","GobangAI"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./GobangConstants"),r=function(){function t(t){this.board=t,this.fiveGroup=[],this.fiveGroupScore=[];for(var e=0;e<15;e++)for(var i=0;i<11;i++)this.fiveGroup.push([cc.v2(i,e),cc.v2(i+1,e),cc.v2(i+2,e),cc.v2(i+3,e),cc.v2(i+4,e)]);for(i=0;i<15;i++)for(e=0;e<11;e++)this.fiveGroup.push([cc.v2(i,e),cc.v2(i,e+1),cc.v2(i,e+2),cc.v2(i,e+3),cc.v2(i,e+4)]);for(var o=-10;o<=10;o++)for(i=0;i<11;i++)o+i<0||o+i>10||this.fiveGroup.push([cc.v2(i,o+i),cc.v2(i+1,o+i+1),cc.v2(i+2,o+i+2),cc.v2(i+3,o+i+3),cc.v2(i+4,o+i+4)]);for(o=4;o<=24;o++)for(e=0;e<11;e++)o-e<4||o-e>14||this.fiveGroup.push([cc.v2(o-e,e),cc.v2(o-e-1,e+1),cc.v2(o-e-2,e+2),cc.v2(o-e-3,e+3),cc.v2(o-e-4,e+4)])}return t.prototype.getNextCoor=function(){this.board.pieceMap;for(var t=0;t<this.fiveGroup.length;t++){for(var e=0,i=0,r=0;r<5;r++)this.board.getPieceByCoor(this.fiveGroup[t][r]).color===o.BLACK?e++:this.board.getPieceByCoor(this.fiveGroup[t][r]).color===o.WHITE&&i++;e+i==0?this.fiveGroupScore[t]=7:e>0&&i>0?this.fiveGroupScore[t]=0:0==e&&1==i?this.fiveGroupScore[t]=35:0==e&&2==i?this.fiveGroupScore[t]=800:0==e&&3==i?this.fiveGroupScore[t]=15e3:0==e&&4==i?this.fiveGroupScore[t]=8e5:0==i&&1==e?this.fiveGroupScore[t]=15:0==i&&2==e?this.fiveGroupScore[t]=400:0==i&&3==e?this.fiveGroupScore[t]=1800:0==i&&4==e&&(this.fiveGroupScore[t]=1e5)}var s=0,c=0;for(t=0;t<this.fiveGroupScore.length;t++)this.fiveGroupScore[t]>s&&(s=this.fiveGroupScore[t],c=t);var n=!1,a=!1,p=0;for(t=0;t<5;t++)if(n||this.board.getPieceByCoor(this.fiveGroup[c][t]).color!==o.NONE||(p=t),a||this.board.getPieceByCoor(this.fiveGroup[c][t]).color===o.NONE||(n=!0,a=!0),a&&this.board.getPieceByCoor(this.fiveGroup[c][t]).color===o.NONE){p=t;break}return this.fiveGroup[c][p]},t}();i.GobangAI=r,cc._RF.pop()},{"./GobangConstants":"GobangConstants"}],GobangBoard:[function(t,e,i){"use strict";cc._RF.push(e,"0c537hphVJHQ529UlnH6eF9","GobangBoard"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./GobangConstants"),r=t("./GobangPiece"),s=cc._decorator,c=s.ccclass,n=s.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.colsSum=15,e.rowsSum=15,e.graphics=null,e.graphics2=null,e.tileWidth=0,e.startX=0,e.startY=0,e.boardWidth=0,e.boardHeight=0,e.lastPiece=null,e.gobangScene=null,e}return __extends(e,t),e.prototype.init=function(t){this.gobangScene=t,this.tileWidth=this.node.width/this.colsSum,this.startX=this.tileWidth/2,this.startY=this.tileWidth/2,this.boardWidth=this.tileWidth*(this.colsSum-1),this.boardHeight=this.tileWidth*(this.rowsSum-1),this.reset(),this.addListeners()},e.prototype.reset=function(){this.graphics.clear(),this.graphics2.clear(),this.graphics.strokeColor=cc.Color.BLACK;for(var t=0;t<this.colsSum;t++)this.graphics.moveTo(this.startX+t*this.tileWidth,this.startY),this.graphics.lineTo(this.startX+t*this.tileWidth,this.startY+this.boardHeight),this.graphics.stroke();for(var e=0;e<this.rowsSum;e++)this.graphics.moveTo(this.startX,this.startY+e*this.tileWidth),this.graphics.lineTo(this.startX+this.boardWidth,this.startY+e*this.tileWidth),this.graphics.stroke();this.graphics.strokeColor=cc.Color.RED,this.graphics.fillColor=cc.Color.RED;var i=Math.floor(this.colsSum/2),s=Math.floor(this.rowsSum/2);this.graphics.circle(this.startX+i*this.tileWidth,this.startY+s*this.tileWidth,5),this.graphics.fill(),this.pieceMap=[];for(e=0;e<this.rowsSum;e++){this.pieceMap[e]=[];for(t=0;t<this.colsSum;t++)this.pieceMap[e][t]=new r.GobangPiece(t,e,o.NONE)}},e.prototype.drawLastPieceRect=function(){this.graphics2.clear(),this.lastPiece&&(this.graphics2.strokeColor=cc.Color.RED,this.graphics2.rect(this.startX+this.tileWidth*this.lastPiece.x-this.tileWidth/2,this.startY+this.tileWidth*this.lastPiece.y-this.tileWidth/2,this.tileWidth,this.tileWidth),this.graphics2.stroke())},e.prototype.placeBlack=function(t){this.graphics.strokeColor=cc.Color.BLACK,this.graphics.fillColor=cc.Color.BLACK,this.graphics.circle(this.startX+t.x*this.tileWidth,this.startY+t.y*this.tileWidth,.45*this.tileWidth),this.graphics.fill(),this.pieceMap[t.x][t.y]=new r.GobangPiece(t.x,t.y,o.BLACK),this.lastPiece=this.pieceMap[t.x][t.y],this.drawLastPieceRect()},e.prototype.placeWhite=function(t){this.graphics.strokeColor=cc.Color.WHITE,this.graphics.fillColor=cc.Color.WHITE,this.graphics.circle(this.startX+t.x*this.tileWidth,this.startY+t.y*this.tileWidth,.45*this.tileWidth),this.graphics.fill(),this.pieceMap[t.x][t.y]=new r.GobangPiece(t.x,t.y,o.WHITE),this.lastPiece=this.pieceMap[t.x][t.y],this.drawLastPieceRect()},e.prototype.getPieceByCoor=function(t){return this.pieceMap[t.x][t.y]},e.prototype.onTouched=function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation()),i=this.getCoorByPos(e);this.gobangScene.onBoardTouched(i)},e.prototype.getCoorByPos=function(t){var e=Math.round((t.x-this.startX)/this.tileWidth),i=Math.round((t.y-this.startY)/this.tileWidth);return cc.v2(e,i)},e.prototype.judgeWin=function(){for(var t=0,e=0;e<this.colsSum;e++)if(this.pieceMap[e][this.lastPiece.y].color===this.lastPiece.color){if(5===++t)return!0}else t=0;t=0;for(var i=0;i<this.rowsSum;i++)if(this.pieceMap[this.lastPiece.x][i].color===this.lastPiece.color){if(5==++t)return!0}else t=0;var o=this.lastPiece.y-this.lastPiece.x;t=0;for(e=0;e<this.colsSum;e++)if(!(o+e<0||o+e>=this.rowsSum))if(this.pieceMap[e][o+e].color===this.lastPiece.color){if(5==++t)return!0}else t=0;o=this.lastPiece.y+this.lastPiece.x,t=0;for(e=0;e<15;e++)if(!(o-e<0||o-e>=this.rowsSum))if(this.pieceMap[e][o-e].color===this.lastPiece.color){if(5==++t)return!0}else t=0;return!1},e.prototype.addListeners=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouched,this)},e.prototype.removeListeners=function(){},__decorate([n(cc.Integer)],e.prototype,"colsSum",void 0),__decorate([n(cc.Integer)],e.prototype,"rowsSum",void 0),__decorate([n(cc.Graphics)],e.prototype,"graphics",void 0),__decorate([n(cc.Graphics)],e.prototype,"graphics2",void 0),e=__decorate([c],e)}(cc.Component);i.GobangBoard=a,cc._RF.pop()},{"./GobangConstants":"GobangConstants","./GobangPiece":"GobangPiece"}],GobangConstants:[function(t,e,i){"use strict";cc._RF.push(e,"4d1454ZxfBKuoBi2bCCS2eB","GobangConstants"),Object.defineProperty(i,"__esModule",{value:!0}),i.NONE=0,i.BLACK=1,i.WHITE=2,cc._RF.pop()},{}],GobangPiece:[function(t,e,i){"use strict";cc._RF.push(e,"b1aa3dPul9JxbYweTzmBe9T","GobangPiece"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(t,e,i){this.x=t,this.y=e,this.color=i};i.GobangPiece=o,cc._RF.pop()},{}],GobangScene:[function(t,e,i){"use strict";cc._RF.push(e,"2fcd3v+r05H8q3UVtZU7Lkf","GobangScene"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./GobangBoard"),r=t("./GobangConstants"),s=t("./GobangAI"),c=t("../G"),n=cc._decorator,a=n.ccclass,p=n.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.board=null,e.ai=null,e.state=r.NONE,e}return __extends(e,t),e.prototype.start=function(){this.board.init(this),this.ai=new s.GobangAI(this.board),this.startGame()},e.prototype.startGame=function(){this.state=r.BLACK,this.board.reset(),c.G.gameRoot.showTip("你是黑棋你先走")},e.prototype.overGame=function(){this.state===r.BLACK?(cc.log("黑棋胜"),this.state=r.NONE,c.G.gameRoot.showMaskMessage("你赢了阿尔法二狗！",{label:"朕知道了",cb:function(){},target:this})):this.state===r.WHITE&&(cc.log("白旗胜"),c.G.gameRoot.showMaskMessage("你输给了阿尔法二狗！",{label:"服了",cb:function(){},target:this},{label:"不服",cb:function(){},target:this}),this.state=r.NONE)},e.prototype.onBtnReturn=function(){c.G.returnHall()},e.prototype.onBtnRestart=function(){this.startGame()},e.prototype.onBoardTouched=function(t){var e=this;switch(this.state){case r.NONE:break;case r.BLACK:if(this.board.getPieceByCoor(t).color!==r.NONE)return void c.G.gameRoot.showTip("这里有子了，你是不是傻");this.board.placeBlack(t),this.board.judgeWin()?this.overGame():(this.state=r.WHITE,this.scheduleOnce(function(){e.board.placeWhite(e.ai.getNextCoor()),e.board.judgeWin()?e.overGame():e.state=r.BLACK},1));break;case r.WHITE:}},__decorate([p(o.GobangBoard)],e.prototype,"board",void 0),e=__decorate([a],e)}(cc.Component);i.GobangScene=h,cc._RF.pop()},{"../G":"G","./GobangAI":"GobangAI","./GobangBoard":"GobangBoard","./GobangConstants":"GobangConstants"}],G:[function(t,e,i){"use strict";cc._RF.push(e,"409bcMsMydAJKg/yHU4OEJk","G"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(){this.gameRoot=null,this.globalSocket=null,this.hallSocket=null,this.queueSocket=null,this.roomSocket=null,this.gameManager=null,this.chessManager=null,this.stand=null,this.ServerIP="117.78.46.98:6455"}return t.prototype.enterHall=function(){cc.director.loadScene("hall")},t.prototype.returnHall=function(){cc.director.loadScene("hall")},t.prototype.enterGobang=function(){this.loadSceneWithProgress("gobang")},t.prototype.enterReversi=function(){this.loadSceneWithProgress("reversi")},t.prototype.enterReversiMatch=function(){this.loadSceneWithProgress("match")},t.prototype.enter2048=function(){this.loadSceneWithProgress("2048")},t.prototype.enterJump=function(){this.loadSceneWithProgress("jump")},t.prototype.enterPuzzle=function(){this.loadSceneWithProgress("puzzle")},t.prototype.enterGet47=function(){this.loadSceneWithProgress("get47")},t.prototype.enterTetris=function(){this.loadSceneWithProgress("tetris")},t.prototype.enterMine=function(){this.loadSceneWithProgress("mine")},t.prototype.enterLink=function(){this.loadSceneWithProgress("link")},t.prototype.enterSnake=function(){this.loadSceneWithProgress("snake")},t.prototype.enterBrick=function(){this.loadSceneWithProgress("brick")},t.prototype.setLoadingDisplay=function(){if(!cc.sys.isNative){var t=document.getElementById("splash"),e=t.querySelector(".progress-bar span");cc.loader.onProgress=function(t,i,o){var r=100*t/i;e&&(e.style.width=r.toFixed(2)+"%")},t.style.display="block",e.style.width="0%",cc.director.once(cc.Director.EVENT_AFTER_SCENE_LAUNCH,function(){t.style.display="none"})}},t.prototype.loadSceneWithProgress=function(t,e){this.setLoadingDisplay(),cc.director.preloadScene(t,function(){setTimeout(function(){cc.director.loadScene(t,e)},1e3)})},t.Instance=new t,t}();i.G=o.Instance,cc._RF.pop()},{}],HallScene:[function(t,e,i){"use strict";cc._RF.push(e,"fd226wRnxRPpLNRLPUta677","HallScene"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("../G"),r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.start=function(){o.G.gameRoot.tipPanel.active=!0},e.prototype.onBtnGobang=function(){o.G.enterGobang()},e.prototype.onBtnReversi=function(){o.G.enterReversi()},e.prototype.onBtn2048=function(){o.G.enter2048()},e.prototype.onBtnJump=function(){o.G.enterJump()},e.prototype.onBtnPuzzle=function(){o.G.enterPuzzle()},e.prototype.onBtnGet47=function(){o.G.enterGet47()},e.prototype.onBtnTetris=function(){o.G.enterTetris()},e.prototype.onBtnMine=function(){o.G.enterMine()},e.prototype.onBtnLink=function(){o.G.enterLink()},e.prototype.onBtnSnake=function(){o.G.enterSnake()},e.prototype.onBtnBrick=function(){o.G.enterBrick()},e=__decorate([s],e)}(cc.Component));i.HallScene=c,cc._RF.pop()},{"../G":"G"}],JumpBlock:[function(t,e,i){"use strict";cc._RF.push(e,"2f59bXfwKJPCLY3438CoYsJ","JumpBlock"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){this.head=t,this.length=e}return Object.defineProperty(t.prototype,"tail",{get:function(){return this.head+this.length-1},enumerable:!0,configurable:!0}),t}();i.Block=o,cc._RF.pop()},{}],JumpConstants:[function(t,e,i){"use strict";var o;cc._RF.push(e,"011d12M67BCB6Gv7D1zh1X3","JumpConstants"),Object.defineProperty(i,"__esModule",{value:!0}),(o=i.STATE||(i.STATE={}))[o.NONE=0]="NONE",o[o.READY=1]="READY",o[o.START=2]="START",o[o.OVER=3]="OVER",cc._RF.pop()},{}],JumpPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"b6b4dcrVKZGkYFaEw6tiwLd","JumpPlayer"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,s=o.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.power=0,e.initSpeed=0,e.jumpDistance=0,e.speed=0,e.isReadyJump=!1,e.direction=1,e}return __extends(e,t),e.prototype.readyJump=function(){this.node.runAction(cc.scaleTo(2,1,.5)),this.speed=this.initSpeed,this.isReadyJump=!0},e.prototype.jumpTo=function(t,e,i){var o=this;this.node.stopAllActions(),this.isReadyJump=!1;var r=cc.scaleTo(1,1,1),s=cc.jumpTo(.5,t,200,1),c=cc.callFunc(function(){o.speed=0,o.jumpDistance=0,e()},i);this.node.runAction(r),this.node.runAction(cc.sequence(s,c))},e.prototype.update=function(t){this.isReadyJump&&(this.speed+=t*this.power,this.jumpDistance+=this.speed*t)},__decorate([s(cc.Integer)],e.prototype,"power",void 0),__decorate([s(cc.Float)],e.prototype,"initSpeed",void 0),e=__decorate([r],e)}(cc.Component);i.Player=c,cc._RF.pop()},{}],JumpProgress:[function(t,e,i){"use strict";cc._RF.push(e,"5ecec+6EYpOOICro+tY1/xi","JumpProgress"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,s=o.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progressBar=null,e.anchor=null,e.target=null,e.length=100,e}return __extends(e,t),e.prototype.init=function(t){this.length=t,this.anchor.x=0},e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},e.prototype.updateProgress=function(t){return this.progressBar.progress=t/this.length,this.progressBar.progress>=.95?(this.anchor.x=this.node.width,!0):(this.anchor.x=this.node.getChildByName("bar").width,!1)},__decorate([s(cc.ProgressBar)],e.prototype,"progressBar",void 0),__decorate([s(cc.Node)],e.prototype,"anchor",void 0),__decorate([s(cc.Node)],e.prototype,"target",void 0),e=__decorate([r],e)}(cc.Component);i.Progress=c,cc._RF.pop()},{}],JumpScene:[function(t,e,i){"use strict";cc._RF.push(e,"7df288Am4VDaoxBjM38OlOw","JumpScene"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./JumpStage"),r=t("./JumpConstants"),s=t("./JumpProgress"),c=t("../G"),n=cc._decorator,a=n.ccclass,p=n.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stage=null,e.progress=null,e.ignoreStoryButton=null,e.state=r.STATE.NONE,e}return __extends(e,t),e.prototype.start=function(){this.addListeners(),this.startGame()},e.prototype.startGame=function(){var t=this;this.state=r.STATE.READY,this.stage.init(this),this.stage.showStartStory(function(){t.ignoreStoryButton.active=!1,t.progress.init(200),t.progress.show(),t.state=r.STATE.START,t.stage.startGame()},this)},e.prototype.overGame=function(t){var e=this;t?(this.progress.hide(),this.state=r.STATE.OVER,this.stage.endGame(function(){c.G.gameRoot.showMaskMessage("原来我不是男主",{label:"打扰了",cb:function(){c.G.returnHall()},target:e})},this)):(this.state=r.STATE.OVER,c.G.gameRoot.showMaskMessage("缘已至此",{label:"放不下",cb:function(){e.stage.startGame(),e.state=r.STATE.START,e.progress.updateProgress(0)},target:this},{label:"算了吧",cb:function(){c.G.returnHall()},target:this}))},e.prototype.onScreenTouchStart=function(){this.state===r.STATE.START&&this.stage.playerReadyJump()},e.prototype.onScreenTouchEnd=function(){var t=this;this.state===r.STATE.START&&this.stage.playerJump(function(e,i){-1===e?(t.state=r.STATE.NONE,t.stage.playerDie(function(){t.overGame(!1)},t)):t.progress.updateProgress(e)?t.overGame(!0):i&&t.stage.addNewBlock()},this)},e.prototype.ignoreStory=function(){this.stage.ignoreStory()},e.prototype.addListeners=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onScreenTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onScreenTouchEnd,this)},e.prototype.removeListeners=function(){},__decorate([p(o.Stage)],e.prototype,"stage",void 0),__decorate([p(s.Progress)],e.prototype,"progress",void 0),__decorate([p(cc.Node)],e.prototype,"ignoreStoryButton",void 0),e=__decorate([a],e)}(cc.Component);i.JumpScene=h,cc._RF.pop()},{"../G":"G","./JumpConstants":"JumpConstants","./JumpProgress":"JumpProgress","./JumpStage":"JumpStage"}],JumpStage:[function(t,e,i){"use strict";cc._RF.push(e,"e3e700jxwtD1ao6LQTfMpyq","JumpStage"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./JumpBlock"),r=t("./JumpPlayer"),s=cc._decorator,c=s.ccclass,n=s.property,a=(s.executeInEditMode,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.player=null,e.groundLayer=null,e.gridNum=20,e.g=null,e.minBlockSpace=1,e.maxBlockSpace=10,e.minBlockLength=1,e.maxBlockLength=7,e.cameraMoveDuration=1,e.endScene=null,e.jumpScene=null,e.gridWidth=32,e.groundOrigin=cc.v2(),e.offset=0,e.currBlock=null,e.nextBlock=null,e.playerIndex=null,e.animState=null,e.isMovingStage=!1,e}return __extends(e,t),e.prototype.onLoad=function(){this.gridWidth=Math.floor(this.groundLayer.width/this.gridNum),this.groundOrigin=this.groundLayer.position},e.prototype.init=function(t){this.jumpScene=t},e.prototype.showStartStory=function(t,e){this.g.clear(),this.drawBlock(new o.Block(0,5)),this.drawBlock(new o.Block(9,5));var i=this.getComponent(cc.Animation);i.once("finished",function(){t()},e),this.animState=i.play("start")},e.prototype.startGame=function(){this.reset()},e.prototype.endGame=function(t,e){var i=this;this.g.clear(),this.scheduleOnce(function(){i.endScene.active=!0},5),this.scheduleOnce(function(){i.player.node.getChildByName("name").getComponent(cc.Label).string=""},10),this.scheduleOnce(function(){i.player.node.children.forEach(function(t){t.color=cc.hexToColor("#58D639"),i.player.getComponent(cc.MotionStreak).color=cc.hexToColor("#58D639")})},15),this.scheduleOnce(function(){i.player.readyJump()},20),this.scheduleOnce(function(){var o=cc.v2(i.player.node.x-1e3,i.player.node.y);i.player.jumpTo(o,t,e)},25)},e.prototype.reset=function(){this.groundLayer.position=this.groundOrigin,this.g.clear(),this.currBlock=new o.Block(0,5),this.nextBlock=new o.Block(9,5),this.drawBlock(this.currBlock),this.drawBlock(this.nextBlock);var t=this.currBlock.head+Math.floor(this.currBlock.length/2);this.playerIndex=t,this.player.node.position=cc.v2(t*this.gridWidth+this.gridWidth/2,0),this.isMovingStage=!1},e.prototype.drawBlock=function(t){this.g.rect(t.head*this.gridWidth,-this.gridWidth,this.gridWidth*t.length,this.gridWidth),this.g.fill()},e.prototype.addNewBlock=function(){var t=this;this.moveStage(function(){t.currBlock=t.nextBlock;var e=Math.floor(t.minBlockSpace+Math.random()*(t.maxBlockSpace-t.minBlockSpace)),i=t.currBlock.head+t.currBlock.length+e,r=Math.floor(t.minBlockLength+Math.random()*(t.maxBlockLength-t.minBlockLength));t.nextBlock=new o.Block(i,r),t.drawBlock(t.nextBlock)},this)},e.prototype.moveStage=function(t,e){var i=this;this.isMovingStage=!0;var o=(this.nextBlock.head-this.currBlock.head)*this.gridWidth,r=cc.moveBy(this.cameraMoveDuration,-o,0),s=cc.sequence(r,cc.callFunc(function(){i.isMovingStage=!1,t()},e));this.groundLayer.runAction(s)},e.prototype.canReadyJump=function(){return!this.isMovingStage&&0===this.player.speed},e.prototype.playerReadyJump=function(){this.canReadyJump()&&this.player.readyJump()},e.prototype.ignoreStory=function(){this.animState.speed=4},e.prototype.playerDie=function(t,e){var i=cc.sequence(cc.moveBy(1,0,-1e3),cc.callFunc(t,e));this.player.node.runAction(i)},e.prototype.playerJump=function(t,e){var i=this;if(this.player.isReadyJump){var o=Math.round(this.player.jumpDistance/this.gridWidth),r=this.playerIndex+o,s=cc.v2(this.gridWidth*r+this.gridWidth/2,0);this.player.jumpTo(s,function(){i.playerIndex=r,r<=i.currBlock.tail?t(i.playerIndex,!1):r>=i.nextBlock.head&&r<=i.nextBlock.tail?t(i.playerIndex,!0):t(-1,!1)},this)}},__decorate([n(r.Player)],e.prototype,"player",void 0),__decorate([n(cc.Node)],e.prototype,"groundLayer",void 0),__decorate([n(cc.Integer)],e.prototype,"gridNum",void 0),__decorate([n(cc.Graphics)],e.prototype,"g",void 0),__decorate([n(cc.Integer)],e.prototype,"minBlockSpace",void 0),__decorate([n(cc.Integer)],e.prototype,"maxBlockSpace",void 0),__decorate([n(cc.Integer)],e.prototype,"minBlockLength",void 0),__decorate([n(cc.Integer)],e.prototype,"maxBlockLength",void 0),__decorate([n(cc.Float)],e.prototype,"cameraMoveDuration",void 0),__decorate([n(cc.Node)],e.prototype,"endScene",void 0),e=__decorate([c],e)}(cc.Component));i.Stage=a,cc._RF.pop()},{"./JumpBlock":"JumpBlock","./JumpPlayer":"JumpPlayer"}],LinkBoard:[function(t,e,i){"use strict";cc._RF.push(e,"2905cdKUxxBqrUAlqcuwUGI","LinkBoard"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./LinkPiece"),r=t("./LinkConstants"),s=cc._decorator,c=s.ccclass,n=s.property,a=s.executeInEditMode,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.piecePrefab=null,e.colNum=10,e.colSpace=5,e.pen=null,e.pictureNum=8,e.colWidth=0,e.lastPiece=null,e.linkScene=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.colWidth=(this.node.width-this.colSpace*(this.colNum+1))/this.colNum,this.node.removeAllChildren(),this.pieceMap=[];for(var t=0;t<this.colNum;t++){this.pieceMap[t]=[];for(var e=0;e<this.colNum;e++){var i=cc.instantiate(this.piecePrefab);this.node.addChild(i),i.x=t*(this.colWidth+this.colSpace)+this.colSpace,i.y=e*(this.colWidth+this.colSpace)+this.colSpace,i.width=this.colWidth,i.height=this.colWidth;var r=i.getComponent(o.Piece);this.pieceMap[t][e]=r,this.pieceMap[t][e].init(t,e,0),this.addTouchEvent(r)}}},e.prototype.init=function(t){this.linkScene=t},e.prototype.reset=function(){this.shuffle()},e.prototype.addTouchEvent=function(t){var e=this;t.node.on(cc.Node.EventType.TOUCH_END,function(){0!==t.type&&(t.state===r.PIECE_STATE.IDLE?null===e.lastPiece?(t.setState(r.PIECE_STATE.PRESS),e.lastPiece=t):e.link(e.lastPiece,t)?(e.lastPiece=null,e.judgeWin()):(e.lastPiece.setState(r.PIECE_STATE.IDLE),t.setState(r.PIECE_STATE.PRESS),e.lastPiece=t):t.state===r.PIECE_STATE.PRESS&&(t.setState(r.PIECE_STATE.IDLE),e.lastPiece=null))},this)},e.prototype.canDirectLink=function(t,e){if(t.x===e.x){for(var i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),r=i+1;r<o;r++)if(0!==this.pieceMap[t.x][r].type)return!1;return!0}if(t.y===e.y){for(var s=Math.min(t.x,e.x),c=Math.max(t.x,e.x),n=s+1;n<c;n++)if(0!==this.pieceMap[n][t.y].type)return!1;return!0}return!1},e.prototype.findCorner=function(t,e){var i,o;if(this.canDirectLink(t,e))return[!0,[]];if(0===(i=this.pieceMap[t.x][e.y]).type&&this.canDirectLink(i,t)&&this.canDirectLink(i,e))return[!0,[i]];if(0===(i=this.pieceMap[e.x][t.y]).type&&this.canDirectLink(i,t)&&this.canDirectLink(i,e))return[!0,[i]];for(var r=0;r<this.colNum;r++)if(r!==t.x&&r!==e.x&&(i=this.pieceMap[r][t.y],o=this.pieceMap[r][e.y],0===i.type&&0===o.type&&this.canDirectLink(i,o)&&this.canDirectLink(i,t)&&this.canDirectLink(o,e)))return[!0,[i,o]];for(var s=0;s<this.colNum;s++)if(s!==t.y&&s!==e.y&&(i=this.pieceMap[t.x][s],o=this.pieceMap[e.x][s],0===i.type&&0===o.type&&this.canDirectLink(i,o)&&this.canDirectLink(i,t)&&this.canDirectLink(o,e)))return[!0,[i,o]];return[!1,null]},e.prototype.link=function(t,e){if(t.type!==e.type)return!1;var i=this.findCorner(t,e),o=i[0],r=i[1];return!!o&&(this.drawLine([t].concat(r).concat(e)),t.setType(0),e.setType(0),!0)},e.prototype.drawLine=function(t){var e=this,i=this.getPieceCenterPosition(t[0]);this.pen.moveTo(i.x,i.y);for(var o=1;o<t.length;o++)i=this.getPieceCenterPosition(t[o]),this.pen.lineTo(i.x,i.y);this.pen.stroke(),setTimeout(function(){e.clearLine()},500)},e.prototype.clearLine=function(){this.pen.clear()},e.prototype.getPieceCenterPosition=function(t){var e=t.x*(this.colWidth+this.colSpace)+this.colSpace+this.colWidth/2,i=t.y*(this.colWidth+this.colSpace)+this.colSpace+this.colWidth/2;return cc.v2(e,i)},e.prototype.shuffle=function(){for(var t=[],e=1;e<=78;e++)t.push(e);for(var i=[],o=1;o<this.colNum-1;o++)for(var s=1;s<this.colNum-1;s++)i.push(this.pieceMap[o][s]);var c=Math.pow(this.colNum-2,2),n=c/2%this.pictureNum,a=(c/2-n)/this.pictureNum;for(e=0;e<this.pictureNum;e++){for(var p=this.randomPop(t),h=0;h<2*a;h++){(l=this.randomPop(i)).setType(p),l.setState(r.PIECE_STATE.IDLE)}if(e<n)for(var u=0;u<2;u++){var l;(l=this.randomPop(i)).setType(p),l.setState(r.PIECE_STATE.IDLE)}}},e.prototype.randomPop=function(t){var e=Math.random()*t.length|0;return t.splice(e,1)[0]},e.prototype.judgeWin=function(){for(var t=0;t<this.colNum;t++)for(var e=0;e<this.colNum;e++)if(0!==this.pieceMap[t][e].type)return!1;return this.linkScene.overGame(),!0},__decorate([n(cc.Prefab)],e.prototype,"piecePrefab",void 0),__decorate([n(cc.Integer)],e.prototype,"colNum",void 0),__decorate([n(cc.Integer)],e.prototype,"colSpace",void 0),__decorate([n(cc.Graphics)],e.prototype,"pen",void 0),__decorate([n(cc.Integer)],e.prototype,"pictureNum",void 0),e=__decorate([c,a],e)}(cc.Component);i.LinkBoard=p,cc._RF.pop()},{"./LinkConstants":"LinkConstants","./LinkPiece":"LinkPiece"}],LinkConstants:[function(t,e,i){"use strict";var o,r;cc._RF.push(e,"c9347nByapGEZWvcbpq9syG","LinkConstants"),Object.defineProperty(i,"__esModule",{value:!0}),(o=i.STATE||(i.STATE={}))[o.NONE=0]="NONE",o[o.START=1]="START",o[o.OVER=2]="OVER",(r=i.PIECE_STATE||(i.PIECE_STATE={}))[r.IDLE=0]="IDLE",r[r.PRESS=1]="PRESS",cc._RF.pop()},{}],LinkPiece:[function(t,e,i){"use strict";cc._RF.push(e,"484catbAbJCg4Ac4ycFbtOo","LinkPiece"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./LinkConstants"),r=cc._decorator,s=r.ccclass,c=r.property,n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e.herosAtlas=null,e.x=0,e.y=0,e.type=0,e.state=o.PIECE_STATE.IDLE,e}return __extends(e,t),e.prototype.init=function(t,e,i,r){void 0===r&&(r=o.PIECE_STATE.IDLE),this.x=t,this.y=e,this.setType(i),this.setState(r)},e.prototype.setType=function(t){this.type=t,this.sprite.spriteFrame=0===t?null:this.herosAtlas.getSpriteFrame("hero_"+t)},e.prototype.setState=function(t){t!==this.state&&(this.state=t,t===o.PIECE_STATE.IDLE?this.node.color=cc.Color.WHITE:t===o.PIECE_STATE.PRESS&&(this.node.color=cc.Color.GRAY))},__decorate([c(cc.Sprite)],e.prototype,"sprite",void 0),__decorate([c(cc.SpriteAtlas)],e.prototype,"herosAtlas",void 0),e=__decorate([s],e)}(cc.Component);i.Piece=n,cc._RF.pop()},{"./LinkConstants":"LinkConstants"}],LinkScene:[function(t,e,i){"use strict";cc._RF.push(e,"dc931w3hAtIsYZIL9HDvPQN","LinkScene"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./LinkBoard"),r=t("./LinkConstants"),s=t("../G"),c=t("../shared/Timer"),n=cc._decorator,a=n.ccclass,p=n.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.board=null,e.rewardNode=null,e.timer=null,e.state=r.STATE.NONE,e}return __extends(e,t),e.prototype.start=function(){this.board.init(this),this.startGame()},e.prototype.startGame=function(){this.state=r.STATE.START,this.board.reset(),this.rewardNode.active=!1,this.timer.reset(),this.timer.run()},e.prototype.overGame=function(){var t=this;this.state=r.STATE.OVER,this.timer.stop(),s.G.gameRoot.showMaskMessage("你用了"+this.timer.time.toFixed(1)+"秒",{label:"领取奖励",cb:function(){t.rewardNode.active=!0}})},e.prototype.onBtnReturn=function(){s.G.returnHall()},e.prototype.onBtnRestart=function(){this.startGame()},__decorate([p(o.LinkBoard)],e.prototype,"board",void 0),__decorate([p(cc.Node)],e.prototype,"rewardNode",void 0),__decorate([p(c.Timer)],e.prototype,"timer",void 0),e=__decorate([a],e)}(cc.Component);i.LinkScene=h,cc._RF.pop()},{"../G":"G","../shared/Timer":"Timer","./LinkBoard":"LinkBoard","./LinkConstants":"LinkConstants"}],LodingScene:[function(t,e,i){"use strict";cc._RF.push(e,"118a2LRWWBIKY9afEfjWW/h","LodingScene"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("../G"),r=t("../shared/GameRoot"),s=cc._decorator,c=s.ccclass,n=s.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tipLabel=null,e.gameRoot=null,e}return __extends(e,t),e.prototype.onLoad=function(){cc.game.addPersistRootNode(this.gameRoot),this.initGlobal()},e.prototype.initGlobal=function(){o.G.gameRoot=this.gameRoot.getComponent(r.GameRoot)},e.prototype.start=function(){var t=this;cc.director.setDisplayStats(!1);var e="始终相信美好的事情不会发生",i=0;this.tipLabel.string="",this.schedule(function(){++i===e.length+1?t.onLoadSuccess():t.tipLabel.string=e.substring(0,i)},.3,e.length+1,.3)},e.prototype.onLoadSuccess=function(){o.G.enterHall()},__decorate([n(cc.Label)],e.prototype,"tipLabel",void 0),__decorate([n(cc.Node)],e.prototype,"gameRoot",void 0),e=__decorate([c],e)}(cc.Component);i.LodingScene=a,cc._RF.pop()},{"../G":"G","../shared/GameRoot":"GameRoot"}],M2048Board:[function(t,e,i){"use strict";cc._RF.push(e,"8daa0Je3Z9NaKuqNJt/x5E8","M2048Board"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./M2048Piece"),r=t("./M2048Constants"),s=cc._decorator,c=s.ccclass,n=s.property,a=s.executeInEditMode,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.colsSum=4,e.rowsSum=4,e.graphics=null,e.piecePrefab=null,e.pieceLayer=null,e.tileWidth=0,e.startX=0,e.startY=0,e.boardWidth=0,e.boardHeight=0,e.m2048Scene=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.tileWidth=this.node.width/(this.colsSum+1),this.startX=this.tileWidth/2,this.startY=this.tileWidth/2,this.boardWidth=this.tileWidth*this.colsSum,this.boardHeight=this.tileWidth*this.rowsSum,this.graphics.clear(),this.graphics.strokeColor=cc.Color.BLACK;for(var t=0;t<this.colsSum+1;t++)this.graphics.moveTo(this.startX+t*this.tileWidth,this.startY),this.graphics.lineTo(this.startX+t*this.tileWidth,this.startY+this.boardHeight),this.graphics.stroke();for(var e=0;e<this.rowsSum+1;e++)this.graphics.moveTo(this.startX,this.startY+e*this.tileWidth),this.graphics.lineTo(this.startX+this.boardWidth,this.startY+e*this.tileWidth),this.graphics.stroke();this.pieceLayer.removeAllChildren(),this.pieceMap=[];for(t=0;t<this.colsSum;t++){this.pieceMap[t]=[];for(e=0;e<this.rowsSum;e++){var i=cc.instantiate(this.piecePrefab).getComponent(o.M2048Piece);i.node.parent=this.pieceLayer,i.node.x=this.startX+t*this.tileWidth+this.tileWidth/2,i.node.y=this.startY+e*this.tileWidth+this.tileWidth/2,this.pieceMap[t][e]=i,i.init(t,t,0)}}},e.prototype.init=function(t){this.m2048Scene=t,this.reset(),this.addListeners()},e.prototype.reset=function(){for(var t=0;t<this.colsSum;t++)for(var e=0;e<this.rowsSum;e++)this.pieceMap[t][e].n=0;for(var i=0;i<2;i++)this.newPiece()},e.prototype.newPiece=function(){for(var t=[],e=0;e<this.colsSum;e++)for(var i=0;i<this.rowsSum;i++)0===this.pieceMap[e][i].n&&t.push(this.pieceMap[e][i]);t[Math.floor(Math.random()*t.length)].randomNumber()},e.prototype.judgeOver=function(){for(var t=0;t<this.rowsSum;t++)for(var e=0;e<this.colsSum;e++){if(0===this.pieceMap[e][t].n)return!1;if(e<=this.colsSum-2&&this.pieceMap[e][t].n===this.pieceMap[e+1][t].n)return!1;if(t<=this.rowsSum-2&&this.pieceMap[e][t].n===this.pieceMap[e][t+1].n)return!1}return!0},e.prototype.getMaxNLabel=function(){for(var t=2,e="2",i=0;i<this.colsSum;i++)for(var o=0;o<this.rowsSum;o++)this.pieceMap[i][o].n>t&&(t=this.pieceMap[i][o].n,e=this.pieceMap[i][o].nLabel.string);return e},e.prototype.slideLeft=function(){for(var t=!1,e=0;e<this.rowsSum;e++)for(var i=0;i<this.colsSum;i++)if(0!==this.pieceMap[i][e].n)for(var o=i+1;o<this.colsSum;o++)if(0!==this.pieceMap[o][e].n){if(this.pieceMap[i][e].n===this.pieceMap[o][e].n){this.pieceMap[i][e].n*=2,this.pieceMap[o][e].n=0,t=!0;break}break}for(e=0;e<this.rowsSum;e++)for(i=0;i<this.colsSum;i++)if(0===this.pieceMap[i][e].n)for(o=i+1;o<this.rowsSum;o++)if(0!==this.pieceMap[o][e].n){this.pieceMap[i][e].n=this.pieceMap[o][e].n,this.pieceMap[o][e].n=0,t=!0;break}return t&&this.newPiece(),t},e.prototype.slideRight=function(){for(var t=!1,e=0;e<this.rowsSum;e++)for(var i=this.colsSum-1;i>=0;i--)if(0!==this.pieceMap[i][e].n)for(var o=i-1;o>=0;o--)if(0!==this.pieceMap[o][e].n){if(this.pieceMap[i][e].n===this.pieceMap[o][e].n){this.pieceMap[i][e].n=2*this.pieceMap[i][e].n,this.pieceMap[o][e].n=0,t=!0;break}break}for(e=0;e<this.rowsSum;e++)for(i=this.colsSum-1;i>=0;i--)if(0===this.pieceMap[i][e].n)for(o=i-1;o>=0;o--)if(0!==this.pieceMap[o][e].n){this.pieceMap[i][e].n=this.pieceMap[o][e].n,this.pieceMap[o][e].n=0,t=!0;break}return t&&this.newPiece(),t},e.prototype.slideDown=function(){for(var t=!1,e=0;e<this.colsSum;e++)for(var i=0;i<this.rowsSum;i++)if(0!==this.pieceMap[e][i].n)for(var o=i+1;o<4;o++)if(0!==this.pieceMap[e][o].n){if(this.pieceMap[e][i].n===this.pieceMap[e][o].n){this.pieceMap[e][i].n=2*this.pieceMap[e][i].n,this.pieceMap[e][o].n=0,t=!0;break}break}for(e=0;e<this.colsSum;e++)for(i=0;i<this.rowsSum;i++)if(0===this.pieceMap[e][i].n)for(o=i+1;o<this.rowsSum;o++)if(0!==this.pieceMap[e][o].n){this.pieceMap[e][i].n=this.pieceMap[e][o].n,this.pieceMap[e][o].n=0,t=!0;break}return t&&this.newPiece(),t},e.prototype.slideUp=function(){for(var t=!1,e=0;e<this.colsSum;e++)for(var i=this.rowsSum-1;i>=0;i--)if(0!==this.pieceMap[e][i].n)for(var o=i-1;o>=0;o--)if(0!==this.pieceMap[e][o].n){if(this.pieceMap[e][i].n===this.pieceMap[e][o].n){this.pieceMap[e][i].n=2*this.pieceMap[e][i].n,this.pieceMap[e][o].n=0,t=!0;break}break}for(e=0;e<this.colsSum;e++)for(i=this.rowsSum-1;i>=0;i--)if(0==this.pieceMap[e][i].n)for(o=i-1;o>=0;o--)if(0!=this.pieceMap[e][o].n){this.pieceMap[e][i].n=this.pieceMap[e][o].n,this.pieceMap[e][o].n=0,t=!0;break}return t&&this.newPiece(),t},e.prototype.onTouched=function(t){var e=t.getStartLocation(),i=t.getLocation(),o=i.x-e.x,s=i.y-e.y;Math.abs(o)>Math.abs(s)?o>40?this.m2048Scene.onBoardSlid(r.DIR.RIGHT):o<-40&&this.m2048Scene.onBoardSlid(r.DIR.LEFT):s>40?this.m2048Scene.onBoardSlid(r.DIR.UP):s<-40&&this.m2048Scene.onBoardSlid(r.DIR.DOWN)},e.prototype.onKey=function(t){switch(t.keyCode){case cc.KEY.up:case cc.KEY.w:this.m2048Scene.onBoardSlid(r.DIR.UP);break;case cc.KEY.down:case cc.KEY.s:this.m2048Scene.onBoardSlid(r.DIR.DOWN);break;case cc.KEY.left:case cc.KEY.a:this.m2048Scene.onBoardSlid(r.DIR.LEFT);break;case cc.KEY.right:case cc.KEY.d:this.m2048Scene.onBoardSlid(r.DIR.RIGHT)}},e.prototype.addListeners=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouched,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKey,this)},e.prototype.removeListeners=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKey,this)},__decorate([n(cc.Integer)],e.prototype,"colsSum",void 0),__decorate([n(cc.Integer)],e.prototype,"rowsSum",void 0),__decorate([n(cc.Graphics)],e.prototype,"graphics",void 0),__decorate([n(cc.Prefab)],e.prototype,"piecePrefab",void 0),__decorate([n(cc.Node)],e.prototype,"pieceLayer",void 0),e=__decorate([c,a],e)}(cc.Component);i.M2048Board=p,cc._RF.pop()},{"./M2048Constants":"M2048Constants","./M2048Piece":"M2048Piece"}],M2048Constants:[function(t,e,i){"use strict";var o,r;cc._RF.push(e,"ae1feSJm35PO7NFsru97cE/","M2048Constants"),Object.defineProperty(i,"__esModule",{value:!0}),(o=i.DIR||(i.DIR={}))[o.LEFT=1]="LEFT",o[o.UP=2]="UP",o[o.RIGHT=3]="RIGHT",o[o.DOWN=4]="DOWN",(r=i.STATE||(i.STATE={}))[r.NONE=0]="NONE",r[r.START=1]="START",r[r.OVER=2]="OVER",cc._RF.pop()},{}],M2048Piece:[function(t,e,i){"use strict";cc._RF.push(e,"cb9b4J96u9N86ZDPdyznPbw","M2048Piece"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,s=o.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nLabel=null,e._n=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"n",{get:function(){return this._n},set:function(t){var e,i;switch(this._n=t,t){case 0:i="",e=cc.Color.BLACK;break;case 2:i="幼儿园",e=cc.hexToColor("#784212");break;case 4:i="小学生",e=cc.hexToColor("#784212");break;case 8:i="初中生",e=cc.hexToColor("#7E5109");break;case 16:i="高中生",e=cc.hexToColor("#7D6608");break;case 32:i="大学生",e=cc.hexToColor("#186A3B");break;case 64:i="研究生",e=cc.hexToColor("#145A32");break;case 128:i="硕士生",e=cc.hexToColor("#0B5345");break;case 256:i="博士生",e=cc.hexToColor("#0E6251");break;case 512:i="实习生",e=cc.hexToColor("#1B4F72");break;case 1024:i="码农",e=cc.hexToColor("#154360");break;case 2048:i="码神",e=cc.hexToColor("#4A235A");break;case 4096:i="女装大佬",e=cc.hexToColor("#512E5F");break;case 8192:i="众生平等",e=cc.hexToColor("#78281F");break;default:i="开挂吧你",e=cc.hexToColor("#641E16")}this.nLabel.string=i,this.nLabel.node.color=e},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e,i){this.x=t,this.y=e,this.n=i},e.prototype.randomNumber=function(){this.n=Math.random()<.9?2:4},e.prototype.getHcolor=function(t,e){var i=e/6,o=0,r=0,s=0,c=0;return t<1*i?(o=t/i*255,r=255,s=0,c=Math.round(o)):t>=i&&t<2*i?(o=255-(t-i)/i*255,r=Math.round(o),s=0,c=255):t>=2*i&&t<3*i?(o=(t-2*i)/i*255,r=0,s=Math.round(o),c=255):t>=3*i&&t<4*i?(o=255-(t-3*i)/i*255,r=0,s=255,c=Math.round(o)):t>=4*i&&t<5*i?(o=(t-4*i)/i*255,r=Math.round(o),s=255,c=0):(o=255-(t-5*i)/i*255,r=255,s=Math.round(o),c=0),cc.color(r,s,c)},__decorate([s(cc.Label)],e.prototype,"nLabel",void 0),e=__decorate([r],e)}(cc.Component);i.M2048Piece=c,cc._RF.pop()},{}],M2048Scene:[function(t,e,i){"use strict";cc._RF.push(e,"d6ad1DvUutCO5e9tw6UJExv","M2048Scene"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./M2048Board"),r=t("../G"),s=t("./M2048Constants"),c=cc._decorator,n=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.board=null,e.state=s.STATE.NONE,e}return __extends(e,t),e.prototype.start=function(){this.board.init(this),this.startGame()},e.prototype.startGame=function(){this.state=s.STATE.START,this.board.reset(),r.G.gameRoot.showTip("四方向手势滑动")},e.prototype.overGame=function(){var t=this.board.getMaxNLabel();r.G.gameRoot.showMaskMessage(t,{label:"OK",cb:function(){},target:this}),this.state=s.STATE.OVER},e.prototype.onBtnReturn=function(){r.G.returnHall()},e.prototype.onBtnRestart=function(){this.startGame()},e.prototype.onBoardSlid=function(t){var e=!1;switch(t){case s.DIR.LEFT:e=this.board.slideLeft();break;case s.DIR.RIGHT:e=this.board.slideRight();break;case s.DIR.UP:e=this.board.slideUp();break;case s.DIR.DOWN:e=this.board.slideDown();break;default:cc.error("方向错误")}e&&this.board.judgeOver()&&this.overGame()},__decorate([a(o.M2048Board)],e.prototype,"board",void 0),e=__decorate([n],e)}(cc.Component);i.M2048Scene=p,cc._RF.pop()},{"../G":"G","./M2048Board":"M2048Board","./M2048Constants":"M2048Constants"}],MineConstans:[function(t,e,i){"use strict";var o,r,s;cc._RF.push(e,"377f1wDS+ZNiK34Bo00vs8d","MineConstans"),Object.defineProperty(i,"__esModule",{value:!0}),(o=i.STATE||(i.STATE={}))[o.NONE=0]="NONE",o[o.START=1]="START",o[o.OVER=2]="OVER",(r=i.PIECE_TYPE||(i.PIECE_TYPE={}))[r.OPEN0=0]="OPEN0",r[r.OPEN1=1]="OPEN1",r[r.OPEN2=2]="OPEN2",r[r.OPEN3=3]="OPEN3",r[r.OPEN4=4]="OPEN4",r[r.OPEN5=5]="OPEN5",r[r.OPEN6=6]="OPEN6",r[r.OPEN7=7]="OPEN7",r[r.OPEN8=8]="OPEN8",r[r.BOMB=9]="BOMB",(s=i.PIECE_STATE||(i.PIECE_STATE={}))[s.PENDING=1]="PENDING",s[s.FLAG=2]="FLAG",s[s.OPEN=3]="OPEN",cc._RF.pop()},{}],MineLevelLabel:[function(t,e,i){"use strict";cc._RF.push(e,"4079avk3fFC/530/cecMnYc","MineLevelLabel"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,s=o.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.s1=null,e.s2=null,e.nums=[],e._level=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t;var e=t/10|0,i=t%10;this.s1.spriteFrame=this.nums[e],this.s2.spriteFrame=this.nums[i]},enumerable:!0,configurable:!0}),__decorate([s(cc.Sprite)],e.prototype,"s1",void 0),__decorate([s(cc.Sprite)],e.prototype,"s2",void 0),__decorate([s([cc.SpriteFrame])],e.prototype,"nums",void 0),e=__decorate([r],e)}(cc.Component);i.MineLevelLabel=c,cc._RF.pop()},{}],MinePiece:[function(t,e,i){"use strict";cc._RF.push(e,"813feimwL1NhqxaGQMpXWGV","MinePiece"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./MineConstans"),r=cc._decorator,s=r.ccclass,c=r.property,n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pieceSprite=null,e.picPending=null,e.picFlag=null,e.picDeath=null,e.picOpen0=null,e.picOpen1=null,e.picOpen2=null,e.picOpen3=null,e.picOpen4=null,e.picOpen5=null,e.picOpen6=null,e.picOpen7=null,e.picOpen8=null,e.x=0,e.y=0,e._state=o.PIECE_STATE.PENDING,e._type=o.PIECE_TYPE.OPEN0,e}return __extends(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){switch(this._state=t,this.state){case o.PIECE_STATE.PENDING:this.pieceSprite.spriteFrame=this.picPending;break;case o.PIECE_STATE.FLAG:this.pieceSprite.spriteFrame=this.picFlag;break;case o.PIECE_STATE.OPEN:this.setSpriteByType();break;default:cc.error("unknown state!")}},enumerable:!0,configurable:!0}),e.prototype.setSpriteByType=function(){switch(this.type){case o.PIECE_TYPE.OPEN0:this.pieceSprite.spriteFrame=this.picOpen0;break;case o.PIECE_TYPE.OPEN1:this.pieceSprite.spriteFrame=this.picOpen1;break;case o.PIECE_TYPE.OPEN2:this.pieceSprite.spriteFrame=this.picOpen2;break;case o.PIECE_TYPE.OPEN3:this.pieceSprite.spriteFrame=this.picOpen3;break;case o.PIECE_TYPE.OPEN4:this.pieceSprite.spriteFrame=this.picOpen4;break;case o.PIECE_TYPE.OPEN5:this.pieceSprite.spriteFrame=this.picOpen5;break;case o.PIECE_TYPE.OPEN6:this.pieceSprite.spriteFrame=this.picOpen6;break;case o.PIECE_TYPE.OPEN7:this.pieceSprite.spriteFrame=this.picOpen7;break;case o.PIECE_TYPE.OPEN8:this.pieceSprite.spriteFrame=this.picOpen8;break;case o.PIECE_TYPE.BOMB:this.pieceSprite.spriteFrame=this.picDeath}},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this.setSpriteByType()},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e,i,o){this.x=t,this.y=e,this.state=o,this.type=i},__decorate([c(cc.Sprite)],e.prototype,"pieceSprite",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"picPending",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"picFlag",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"picDeath",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"picOpen0",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"picOpen1",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"picOpen2",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"picOpen3",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"picOpen4",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"picOpen5",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"picOpen6",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"picOpen7",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"picOpen8",void 0),e=__decorate([s],e)}(cc.Component);i.Piece=n,cc._RF.pop()},{"./MineConstans":"MineConstans"}],MineScene:[function(t,e,i){"use strict";cc._RF.push(e,"67198fHIXNKkbYuV6JCgYzA","MineScene"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./MnieBoard"),r=t("../G"),s=t("./MineConstans"),c=t("./MineLevelLabel"),n=cc._decorator,a=n.ccclass,p=n.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.board=null,e.bombNumLabel=null,e.flagNumLabel=null,e.levelLabel=null,e.state=s.STATE.NONE,e.level=1,e.maxLevel=20,e}return __extends(e,t),e.prototype.start=function(){this.board.init(this),this.maxLevel=this.board.getMaxLevel(),this.startGame(1)},e.prototype.startGame=function(t){this.level=t,this.state=s.STATE.START,this.board.reset(t),this.levelLabel.level=t,this.bombNumLabel.string=this.board.getBombNum()+"",this.flagNumLabel.string=this.board.getFlagNum()+""},e.prototype.overGame=function(t){var e=this;this.state=s.STATE.OVER,t?this.level===this.maxLevel?r.G.gameRoot.showMaskMessage("恭喜通关!\n获得雷公称号!",{label:"233",cb:function(){r.G.returnHall()},target:this}):r.G.gameRoot.showMaskMessage("恭喜通过第"+this.level+"关!",{label:"下一关",cb:function(){e.level++,e.startGame(e.level)},target:this},{label:"不玩了",cb:function(){r.G.returnHall()},target:this}):r.G.gameRoot.showMaskMessage("你死在了第"+this.level+"关!",{label:"续命",cb:function(){e.startGame(e.level)},target:this},{label:"不玩了",cb:function(){r.G.returnHall()},target:this})},e.prototype.onClickPiece=function(t){if(this.state===s.STATE.START){this.board.openPiece(t);var e=this.board.getBombNum();this.bombNumLabel.string=e+""}},e.prototype.onPressPiece=function(t){if(this.state===s.STATE.START){this.board.flagPiece(t);var e=this.board.getFlagNum();this.flagNumLabel.string=e+""}},e.prototype.onBtnReturn=function(){r.G.returnHall()},e.prototype.onBtnRestart=function(){this.startGame(this.level)},__decorate([p(o.Board)],e.prototype,"board",void 0),__decorate([p(cc.Label)],e.prototype,"bombNumLabel",void 0),__decorate([p(cc.Label)],e.prototype,"flagNumLabel",void 0),__decorate([p(c.MineLevelLabel)],e.prototype,"levelLabel",void 0),e=__decorate([a],e)}(cc.Component);i.MineScene=h,cc._RF.pop()},{"../G":"G","./MineConstans":"MineConstans","./MineLevelLabel":"MineLevelLabel","./MnieBoard":"MnieBoard"}],MnieBoard:[function(t,e,i){"use strict";cc._RF.push(e,"d5dcaOV26xKp7PBWPzaeZRU","MnieBoard"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./MinePiece"),r=t("./MineConstans"),s=cc._decorator,c=s.ccclass,n=s.property,a=s.executeInEditMode,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.piecePrefab=null,e.colNum=9,e.colSpace=9,e.pressTime=1,e.colWidth=80,e.touchingPiece=null,e.touchStartTime=0,e.bombNum=0,e.flagNum=0,e.mineScene=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.colWidth=(this.node.width-this.colSpace*(this.colNum+1))/this.colNum,this.node.removeAllChildren(),this.pieceMap=[];for(var e=function(e){i.pieceMap[e]=[];for(var s=function(s){var c=cc.instantiate(i.piecePrefab);i.node.addChild(c),c.x=e*(i.colWidth+i.colSpace)+i.colSpace,c.y=s*(i.colWidth+i.colSpace)+i.colSpace,c.width=i.colWidth,c.height=i.colWidth,i.pieceMap[e][s]=c.getComponent(o.Piece),i.pieceMap[e][s].init(e,s,r.PIECE_TYPE.OPEN0,r.PIECE_STATE.OPEN),c.on(cc.Node.EventType.TOUCH_START,function(){t.onPieceTouchStart(t.pieceMap[e][s])},i),c.on(cc.Node.EventType.TOUCH_END,function(){t.onPieceTouchEnd(t.pieceMap[e][s])},i)},c=0;c<i.colNum;c++)s(c)},i=this,s=0;s<this.colNum;s++)e(s)},e.prototype.init=function(t){this.mineScene=t},e.prototype.onPieceTouchStart=function(t){this.touchStartTime=(new Date).getTime(),this.touchingPiece=t},e.prototype.onPieceTouchEnd=function(t){(new Date).getTime()-this.touchStartTime>1e3*this.pressTime?this.mineScene.onPressPiece(t):this.mineScene.onClickPiece(t)},e.prototype.openPiece=function(t){t.state===r.PIECE_STATE.PENDING&&(t.type===r.PIECE_TYPE.BOMB?(t.state=r.PIECE_STATE.OPEN,this.showAll(),this.mineScene.overGame(!1)):(this.showBlank(t),this.judgeWin()))},e.prototype.flagPiece=function(t){if(t.state===r.PIECE_STATE.PENDING){if(t.state=r.PIECE_STATE.FLAG,this.flagNum--,0===this.flagNum){var e=this.showRest();this.mineScene.overGame(e)}}else t.state===r.PIECE_STATE.FLAG&&(t.state=r.PIECE_STATE.PENDING,this.flagNum++)},e.prototype.getBombNum=function(){return this.bombNum},e.prototype.getFlagNum=function(){return this.flagNum},e.prototype.getMaxLevel=function(){return this.colNum*this.colNum-1},e.prototype.judgeWin=function(){for(var t=0,e=0;e<this.colNum;e++)for(var i=0;i<this.colNum;i++)this.pieceMap[e][i].state===r.PIECE_STATE.OPEN&&t++;t===Math.pow(this.colNum,2)-this.bombNum&&this.mineScene.overGame(!0)},e.prototype.reset=function(t){this.resetBlank(),this.resetBombs(t),this.resetHintsAndMask()},e.prototype.resetBlank=function(){for(var t=0;t<this.colNum;t++)for(var e=0;e<this.colNum;e++)this.pieceMap[t][e].type=r.PIECE_TYPE.OPEN0},e.prototype.resetBombs=function(t){this.bombNum=t,this.flagNum=t;for(var e=[],i=0;i<this.colNum;i++)for(var o=0;o<this.colNum;o++)e.push({x:i,y:o});for(var s=0;s<t;s++){var c=Math.random()*e.length|0,n=e[c];cc.log(n),this.pieceMap[n.x][n.y].type=r.PIECE_TYPE.BOMB,e.splice(c,1)}},e.prototype.resetHintsAndMask=function(){for(var t=0;t<this.colNum;t++)for(var e=function(e){if(i.pieceMap[t][e].type!==r.PIECE_TYPE.BOMB){var o=i.getRoundPieces(t,e),s=0;o.forEach(function(t){t.type===r.PIECE_TYPE.BOMB&&s++}),i.pieceMap[t][e].type=s}i.pieceMap[t][e].state=r.PIECE_STATE.PENDING},i=this,o=0;o<this.colNum;o++)e(o)},e.prototype.getRoundPieces=function(t,e){var i=[];return t>=1&&i.push(this.pieceMap[t-1][e]),t>=1&&e<=this.colNum-2&&i.push(this.pieceMap[t-1][e+1]),e<=this.colNum-2&&i.push(this.pieceMap[t][e+1]),t<=this.colNum-2&&e<=this.colNum-2&&i.push(this.pieceMap[t+1][e+1]),t<=this.colNum-2&&i.push(this.pieceMap[t+1][e]),t<=this.colNum-2&&e>=1&&i.push(this.pieceMap[t+1][e-1]),e>=1&&i.push(this.pieceMap[t][e-1]),t>=1&&e>=1&&i.push(this.pieceMap[t-1][e-1]),i},e.prototype.showBlank=function(t){for(var e=[t];e.length>0;){var i=e.pop();if(i.type===r.PIECE_TYPE.OPEN0)i.state=r.PIECE_STATE.OPEN,this.getRoundPieces(i.x,i.y).forEach(function(t){t.state===r.PIECE_STATE.PENDING&&e.push(t)});else i.type>=r.PIECE_TYPE.OPEN1&&i.type<=r.PIECE_TYPE.OPEN8&&(i.state=r.PIECE_STATE.OPEN)}},e.prototype.showAll=function(){for(var t=0;t<this.colNum;t++)for(var e=0;e<this.colNum;e++)this.pieceMap[t][e].state=r.PIECE_STATE.OPEN},e.prototype.showRest=function(){for(var t=!0,e=0;e<this.colNum;e++)for(var i=0;i<this.colNum;i++)this.pieceMap[e][i].state===r.PIECE_STATE.PENDING&&(this.pieceMap[e][i].state=r.PIECE_STATE.OPEN,this.pieceMap[e][i].type===r.PIECE_TYPE.BOMB&&(t=!1));return t},__decorate([n(cc.Prefab)],e.prototype,"piecePrefab",void 0),__decorate([n(cc.Integer)],e.prototype,"colNum",void 0),__decorate([n(cc.Integer)],e.prototype,"colSpace",void 0),__decorate([n(cc.Float)],e.prototype,"pressTime",void 0),e=__decorate([c,a],e)}(cc.Component);i.Board=p,cc._RF.pop()},{"./MineConstans":"MineConstans","./MinePiece":"MinePiece"}],PuzzleBoard:[function(t,e,i){"use strict";cc._RF.push(e,"f9b13Qa7CZHRZEtlGELlUrB","PuzzleBoard"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./PuzzlePiece"),r=cc._decorator,s=r.ccclass,c=r.property,n=(r.executeInEditMode,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.piecePrefab=null,e.colNum=5,e.colSpace=5,e.colWidth=0,e.blankPiece=null,e.puzzleScene=null,e}return __extends(e,t),e.prototype.init=function(t){this.puzzleScene=t,this.addListeners()},e.prototype.reset=function(t){this.colNum=t,this.colWidth=(this.node.width-this.colSpace*(this.colNum+1))/this.colNum,this.node.removeAllChildren(),this.pieceMap=[];for(var e=0;e<this.colNum;e++){this.pieceMap[e]=[];for(var i=0;i<this.colNum;i++){var r=cc.instantiate(this.piecePrefab);this.node.addChild(r),r.x=e*(this.colWidth+this.colSpace)+this.colSpace,r.y=i*(this.colWidth+this.colSpace)+this.colSpace,this.pieceMap[e][i]=r.getComponent(o.Piece),this.pieceMap[e][i].init(e,i,this.colNum,this.colWidth),this.pieceMap[e][i].isBlank&&(this.blankPiece=this.pieceMap[e][i])}}this.shuffle()},e.prototype.shuffle=function(){for(var t=0;t<1e3;t++){var e=this.getNearPieces(this.blankPiece),i=Math.floor(Math.random()*e.length);this.exchangeTwoPiece(this.blankPiece,e[i])}},e.prototype.onBoadTouch=function(t){var e=t.getLocation(),i=this.node.convertToNodeSpaceAR(e),o=Math.floor((i.x-this.colSpace)/(this.colWidth+this.colSpace)),r=Math.floor((i.y-this.colSpace)/(this.colWidth+this.colSpace));this.puzzleScene.onBoardTouch(o,r)},e.prototype.movePiece=function(t,e){for(var i=this.pieceMap[t][e],o=0,r=this.getNearPieces(i);o<r.length;o++){var s=r[o];if(s.isBlank)return this.exchangeTwoPiece(i,s),!0}return!1},e.prototype.judgeWin=function(){for(var t=0;t<this.colNum;t++)for(var e=0;e<this.colNum;e++)if(!this.pieceMap[t][e].isRight)return!1;return this.blankPiece.node.active=!0,!0},e.prototype.getNearPieces=function(t){var e=[];return t.curCol>0&&e.push(this.pieceMap[t.curCol-1][t.curRow]),t.curCol<this.colNum-1&&e.push(this.pieceMap[t.curCol+1][t.curRow]),t.curRow>0&&e.push(this.pieceMap[t.curCol][t.curRow-1]),t.curRow<this.colNum-1&&e.push(this.pieceMap[t.curCol][t.curRow+1]),e},e.prototype.exchangeTwoPiece=function(t,e){var i,o,r;this.pieceMap[e.curCol][e.curRow]=t,this.pieceMap[t.curCol][t.curRow]=e,i=[e.curCol,t.curCol],t.curCol=i[0],e.curCol=i[1],o=[e.curRow,t.curRow],t.curRow=o[0],e.curRow=o[1],r=[e.node.position,t.node.position],t.node.position=r[0],e.node.position=r[1]},e.prototype.addListeners=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onBoadTouch,this)},e.prototype.removeListeners=function(){},__decorate([c(cc.Prefab)],e.prototype,"piecePrefab",void 0),__decorate([c(cc.Integer)],e.prototype,"colNum",void 0),__decorate([c(cc.Integer)],e.prototype,"colSpace",void 0),e=__decorate([s],e)}(cc.Component));i.PuzzleBoard=n,cc._RF.pop()},{"./PuzzlePiece":"PuzzlePiece"}],PuzzleConstants:[function(t,e,i){"use strict";var o;cc._RF.push(e,"d89d7sU+zdF0KOaog5T9QzY","PuzzleConstants"),Object.defineProperty(i,"__esModule",{value:!0}),(o=i.STATE||(i.STATE={}))[o.NONE=0]="NONE",o[o.READY=1]="READY",o[o.START=2]="START",o[o.OVER=3]="OVER",cc._RF.pop()},{}],PuzzlePiece:[function(t,e,i){"use strict";cc._RF.push(e,"4b1b5qWuY9FS6vyp1qWoUJ4","PuzzlePiece"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,s=o.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.texture=null,e}return __extends(e,t),Object.defineProperty(e.prototype,"isRight",{get:function(){return this.curCol===this.oriCol&&this.curRow===this.oriRow},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e,i,o){this.oriCol=t,this.oriRow=e,this.curCol=t,this.curRow=e;var r=this.node.addComponent(cc.Sprite);r.spriteFrame=new cc.SpriteFrame(this.texture);var s=r.spriteFrame.getRect(),c=s.width/i,n=s.height/i,a=t*c,p=(i-e-1)*n,h=cc.rect(a,p,c,n);r.spriteFrame.setRect(h),this.node.width=o,this.node.height=o,this.isBlank=this.oriCol===i-1&&0===this.oriRow,this.isBlank&&(this.node.active=!1)},__decorate([s(cc.Texture2D)],e.prototype,"texture",void 0),e=__decorate([r],e)}(cc.Component);i.Piece=c,cc._RF.pop()},{}],PuzzleScene:[function(t,e,i){"use strict";cc._RF.push(e,"c06b53OK21HfoqRmsnlNUNX","PuzzleScene"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./PuzzleConstants"),r=t("./PuzzleBoard"),s=t("../G"),c=t("../shared/Timer"),n=cc._decorator,a=n.ccclass,p=n.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.board=null,e.timer=null,e.winPanel=null,e.level=3,e.state=o.STATE.NONE,e}return __extends(e,t),e.prototype.start=function(){this.addListeners(),this.board.init(this),this.startGame()},e.prototype.startGame=function(){this.winPanel.active=!1,this.state=o.STATE.START,this.board.reset(this.level),this.timer.reset(),this.timer.run()},e.prototype.overGame=function(){this.winPanel.active=!0,this.state=o.STATE.OVER,this.timer.stop(),s.G.gameRoot.showMaskMessage("你坚持了"+this.timer.time.toFixed(1)+"秒",{label:"呵呵"})},e.prototype.onBoardTouch=function(t,e){(this.state=o.STATE.START)&&(this.board.movePiece(t,e)?this.board.judgeWin()&&this.overGame():s.G.gameRoot.showTip("不符合规则"))},e.prototype.onBtnLevelEasy=function(){this.level=3,this.startGame()},e.prototype.onBtnLevelNormal=function(){this.level=5,this.startGame()},e.prototype.onBtnLevelHard=function(){this.level=10,this.startGame()},e.prototype.onBtnReturn=function(){s.G.returnHall()},e.prototype.onBtnRestart=function(){this.startGame()},e.prototype.addListeners=function(){},e.prototype.removeListeners=function(){},__decorate([p(r.PuzzleBoard)],e.prototype,"board",void 0),__decorate([p(c.Timer)],e.prototype,"timer",void 0),__decorate([p(cc.Node)],e.prototype,"winPanel",void 0),e=__decorate([a],e)}(cc.Component);i.PuzzleScene=h,cc._RF.pop()},{"../G":"G","../shared/Timer":"Timer","./PuzzleBoard":"PuzzleBoard","./PuzzleConstants":"PuzzleConstants"}],ReversiAI:[function(t,e,i){"use strict";cc._RF.push(e,"f554edBfB9EGb5YaGb6mEq/","ReversiAI"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./ReversiConstants"),r=function(){function t(t){this.board=t}return t.prototype.getNextCoor=function(){for(var t=[],e=0;e<this.board.pieceMap.length;e++)for(var i=0;i<this.board.pieceMap[e].length;i++)if(this.board.pieceMap[e][i].color===o.NONE&&this.board.canPlace(o.WHITE,cc.v2(e,i))){if(0===e||0===i||e===this.board.pieceMap.length-1||i===this.board.pieceMap[e].length-1)return cc.v2(e,i);t.push(cc.v2(e,i))}return t[Math.floor(Math.random()*t.length)]},t}();i.ReversiAI=r,cc._RF.pop()},{"./ReversiConstants":"ReversiConstants"}],ReversiBoard:[function(t,e,i){"use strict";cc._RF.push(e,"80923WSrblNDr5l6s/fRBrL","ReversiBoard"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./ReversiPiece"),r=t("./ReversiConstants"),s=cc._decorator,c=s.ccclass,n=s.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.colsSum=8,e.rowsSum=8,e.graphics=null,e.graphics2=null,e.tileWidth=0,e.startX=0,e.startY=0,e.boardWidth=0,e.boardHeight=0,e.lastPiece=null,e.reversiScene=null,e}return __extends(e,t),e.prototype.init=function(t){this.reversiScene=t,this.tileWidth=this.node.width/(this.colsSum+1),this.startX=this.tileWidth/2,this.startY=this.tileWidth/2,this.boardWidth=this.tileWidth*this.colsSum,this.boardHeight=this.tileWidth*this.rowsSum,this.reset(),this.addListeners()},e.prototype.reset=function(){this.graphics.clear(),this.graphics2.clear(),this.graphics.strokeColor=cc.Color.BLACK;for(var t=0;t<this.colsSum+1;t++)this.graphics.moveTo(this.startX+t*this.tileWidth,this.startY),this.graphics.lineTo(this.startX+t*this.tileWidth,this.startY+this.boardHeight),this.graphics.stroke();for(var e=0;e<this.rowsSum+1;e++)this.graphics.moveTo(this.startX,this.startY+e*this.tileWidth),this.graphics.lineTo(this.startX+this.boardWidth,this.startY+e*this.tileWidth),this.graphics.stroke();this.pieceMap=[];for(t=0;t<this.colsSum;t++){this.pieceMap[t]=[];for(e=0;e<this.rowsSum;e++)this.pieceMap[t][e]=new o.ReversiPiece(t,e,r.NONE)}this.placeBlack(cc.v2(Math.floor(this.colsSum/2)-1,Math.floor(this.rowsSum/2)-1)),this.placeBlack(cc.v2(Math.floor(this.colsSum/2),Math.floor(this.rowsSum/2))),this.placeWhite(cc.v2(cc.v2(Math.floor(this.colsSum/2)-1,Math.floor(this.rowsSum/2)))),this.placeWhite(cc.v2(cc.v2(Math.floor(this.colsSum/2),Math.floor(this.rowsSum/2)-1)))},e.prototype.draw=function(){this.tileWidth=this.node.width/(this.colsSum+1),this.startX=this.tileWidth/2,this.startY=this.tileWidth/2,this.boardWidth=this.tileWidth*this.colsSum,this.boardHeight=this.tileWidth*this.rowsSum,this.graphics.clear(),this.graphics.strokeColor=cc.Color.BLACK;for(var t=0;t<this.colsSum+1;t++)this.graphics.moveTo(this.startX+t*this.tileWidth,this.startY),this.graphics.lineTo(this.startX+t*this.tileWidth,this.startY+this.boardHeight),this.graphics.stroke();for(var e=0;e<this.rowsSum+1;e++)this.graphics.moveTo(this.startX,this.startY+e*this.tileWidth),this.graphics.lineTo(this.startX+this.boardWidth,this.startY+e*this.tileWidth),this.graphics.stroke()},e.prototype.refresh=function(){this.graphics2.clear();for(var t=0;t<this.colsSum;t++)for(var e=0;e<this.rowsSum;e++)this.pieceMap[t][e].color===r.BLACK?(this.graphics2.strokeColor=cc.Color.BLACK,this.graphics2.fillColor=cc.Color.BLACK,this.graphics2.circle(this.startX+t*this.tileWidth+this.tileWidth/2,this.startY+e*this.tileWidth+this.tileWidth/2,.45*this.tileWidth),this.graphics2.fill()):this.pieceMap[t][e].color===r.WHITE&&(this.graphics2.strokeColor=cc.Color.WHITE,this.graphics2.fillColor=cc.Color.WHITE,this.graphics2.circle(this.startX+t*this.tileWidth+this.tileWidth/2,this.startY+e*this.tileWidth+this.tileWidth/2,.45*this.tileWidth),this.graphics2.fill())},e.prototype.placeBlack=function(t){this.pieceMap[t.x][t.y]=new o.ReversiPiece(t.x,t.y,r.BLACK),this.lastPiece=this.pieceMap[t.x][t.y],this.refresh()},e.prototype.placeWhite=function(t){this.pieceMap[t.x][t.y]=new o.ReversiPiece(t.x,t.y,r.WHITE),this.lastPiece=this.pieceMap[t.x][t.y],this.refresh()},e.prototype.getPieceByCoor=function(t){return this.pieceMap[t.x][t.y]},e.prototype.onTouched=function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation());if(!(e.x<this.startX||e.y<this.startY||e.x>this.startX+this.boardWidth||e.y>this.startY+this.boardHeight)){var i=this.getCoorByPos(e);this.reversiScene.onBoardTouched(i)}},e.prototype.getCoorByPos=function(t){var e=Math.round((t.x-this.startX-this.tileWidth/2)/this.tileWidth),i=Math.round((t.y-this.startY-this.tileWidth/2)/this.tileWidth);return cc.v2(e,i)},e.prototype.nearPiece=function(t,e){switch(e){case 1:if(0!==t.x)return this.pieceMap[t.x-1][t.y];break;case 2:if(0!==t.x&&t.y!==this.rowsSum-1)return this.pieceMap[t.x-1][t.y+1];break;case 3:if(t.y!==this.rowsSum-1)return this.pieceMap[t.x][t.y+1];break;case 4:if(t.x!==this.colsSum-1&&t.y!==this.rowsSum-1)return this.pieceMap[t.x+1][t.y+1];break;case 5:if(t.x!==this.colsSum-1)return this.pieceMap[t.x+1][t.y];break;case 6:if(t.x!==this.colsSum-1&&0!==t.y)return this.pieceMap[t.x+1][t.y-1];break;case 7:if(0!==t.y)return this.pieceMap[t.x][t.y-1];break;case 8:if(0!==t.x&&0!==t.y)return this.pieceMap[t.x-1][t.y-1]}return null},e.prototype.judgePass=function(t,e,i){var o=e;if(null===(o=this.nearPiece(e,i)))return!1;for(;o.color===-t;){if(null===(o=this.nearPiece(o,i)))return!1;if(o.color===t)return!0}return!1},e.prototype.changePass=function(t,e){for(var i=this.nearPiece(t,e);i.color===-this.reversiScene.state;)i.color=t.color,i=this.nearPiece(i,e);this.refresh()},e.prototype.canPlace=function(t,e){for(var i=1;i<=8;i++){if(this.judgePass(t,this.getPieceByCoor(e),i))return!0;if(8===i)return!1}},e.prototype.judgeMoveable=function(t){for(var e=null,i=0;i<this.colsSum;i++)for(var o=0;o<this.rowsSum;o++)if((e=this.pieceMap[i][o]).color===r.NONE)for(var s=1;s<=8;s++)if(this.judgePass(t,e,s))return!0;return!1},e.prototype.judgeWin=function(){var t=this.judgeMoveable(this.lastPiece.color),e=this.judgeMoveable(-this.lastPiece.color);return!t&&!e},e.prototype.getPieceCount=function(){for(var t=0,e=0,i=0;i<this.pieceMap.length;i++)for(var o=0;o<this.pieceMap[i].length;o++)this.pieceMap[i][o].color===r.BLACK?t++:this.pieceMap[i][o].color===r.WHITE&&e++;return{blackPieceSum:t,whitePieceSum:e}},e.prototype.addListeners=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouched,this)},e.prototype.removeListeners=function(){},__decorate([n(cc.Integer)],e.prototype,"colsSum",void 0),__decorate([n(cc.Integer)],e.prototype,"rowsSum",void 0),__decorate([n(cc.Graphics)],e.prototype,"graphics",void 0),__decorate([n(cc.Graphics)],e.prototype,"graphics2",void 0),e=__decorate([c],e)}(cc.Component);i.ReversiBoard=a,cc._RF.pop()},{"./ReversiConstants":"ReversiConstants","./ReversiPiece":"ReversiPiece"}],ReversiConstants:[function(t,e,i){"use strict";cc._RF.push(e,"42661F1JzZNuZUWFOTg6E1t","ReversiConstants"),Object.defineProperty(i,"__esModule",{value:!0}),i.NONE=0,i.BLACK=1,i.WHITE=-1,cc._RF.pop()},{}],ReversiMatch:[function(t,e,i){"use strict";cc._RF.push(e,"7020eXsvUhKHboMrCA/DMcw","ReversiMatch");var o=t("Constants").STAND,r=t("../G");cc.Class({extends:cc.Component,onLoad:function(){r.G.gameRoot.tipPanel.active=!1,r.G.queueSocket=io.connect(r.G.ServerIP+"/queue",{"force new connection":!0}),r.G.queueSocket.on("set stand",function(t){"black"===t?r.G.stand=o.BLACK:"white"===t&&(r.G.stand=o.WHITE)}),r.G.queueSocket.on("match success",function(t){cc.log("match success"+t),r.G.roomSocket=io.connect(r.G.ServerIP+"/rooms"+t,{"force new connection":!0}),r.G.queueSocket.disconnect(),cc.director.loadScene("reversi_online")})},onBtnCancel:function(){r.G.queueSocket.disconnect(),cc.director.loadScene("hall")}}),cc._RF.pop()},{"../G":"G",Constants:"Constants"}],ReversiMenu:[function(t,e,i){"use strict";cc._RF.push(e,"d2006Iy0TVHwoB5d//bMtWY","ReversiMenu");var o=t("../G");cc.Class({extends:cc.Component,onLoad:function(){o.G.globalSocket=io.connect(o.G.ServerIP),o.G.hallSocket=io.connect(o.G.ServerIP+"/hall",{"force new connection":!0})},onBtnStart:function(){o.G.hallSocket.disconnect(),cc.director.loadScene("match")}}),cc._RF.pop()},{"../G":"G"}],ReversiPiece:[function(t,e,i){"use strict";cc._RF.push(e,"bdfa7e/LeBNGpN93hwoveof","ReversiPiece"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(t,e,i){this.x=t,this.y=e,this.color=i};i.ReversiPiece=o,cc._RF.pop()},{}],ReversiScene:[function(t,e,i){"use strict";cc._RF.push(e,"05ff4fnZAdCwZScbk1f0GpO","ReversiScene"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./ReversiBoard"),r=t("./ReversiAI"),s=t("./ReversiConstants"),c=t("../G"),n=cc._decorator,a=n.ccclass,p=n.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.board=null,e.blackScoreLabel=null,e.whiteScoreLabel=null,e.ai=null,e.state=s.NONE,e}return __extends(e,t),e.prototype.start=function(){c.G.gameRoot.tipPanel.active=!0,this.board.init(this),this.ai=new r.ReversiAI(this.board),this.startGame()},e.prototype.startGame=function(){this.state=s.BLACK,this.board.reset(),this.blackScoreLabel.string="2",this.whiteScoreLabel.string="2",c.G.gameRoot.showTip("你是黑棋你先走")},e.prototype.overGame=function(){var t=this.board.getPieceCount(),e=t.blackPieceSum,i=t.whitePieceSum;e>i?(cc.log("白棋胜"),c.G.gameRoot.showMaskMessage("你赢了阿尔法二狗！",{label:"朕知道了",cb:function(){},target:this})):e<i?(cc.log("黑棋胜"),c.G.gameRoot.showMaskMessage("你输给了阿尔法二狗！",{label:"服了",cb:function(){},target:this},{label:"不服",cb:function(){},target:this})):(cc.log("平局"),c.G.gameRoot.showMaskMessage("你和阿尔法二狗五五开!",{label:"朕知道了",cb:function(){},target:this})),this.state=s.NONE},e.prototype.updateScore=function(){var t=this.board.getPieceCount(),e=t.blackPieceSum,i=t.whitePieceSum;this.blackScoreLabel.string=e+"",this.whiteScoreLabel.string=i+""},e.prototype.onBtnReturn=function(){c.G.returnHall()},e.prototype.onBtnRestart=function(){this.startGame()},e.prototype.runAi=function(){var t=this;this.scheduleOnce(function(){var e=t.ai.getNextCoor();t.board.placeWhite(e);for(var i=t.board.getPieceByCoor(e),o=1;o<=8;o++)t.board.judgePass(s.WHITE,i,o)&&t.board.changePass(i,o);t.updateScore(),t.board.judgeWin()?t.overGame():t.board.judgeMoveable(s.BLACK)?t.state=s.BLACK:(c.G.gameRoot.showTip("黑棋无地可下，白棋继续"),t.runAi())},1)},e.prototype.onBoardTouched=function(t){switch(this.state){case s.NONE:break;case s.BLACK:var e=this.board.getPieceByCoor(t);if(e.color!==s.NONE)return void c.G.gameRoot.showTip("这里有子了，你是不是傻");if(!this.board.canPlace(this.state,t))return void c.G.gameRoot.showTip("不符合规则");this.board.placeBlack(t),e=this.board.getPieceByCoor(t);for(var i=1;i<=8;i++)this.board.judgePass(s.BLACK,e,i)&&this.board.changePass(e,i);this.updateScore(),this.board.judgeWin()?this.overGame():this.board.judgeMoveable(s.WHITE)?(this.state=s.WHITE,this.runAi()):c.G.gameRoot.showTip("白棋无地可下，黑棋继续");break;case s.WHITE:}},__decorate([p(o.ReversiBoard)],e.prototype,"board",void 0),__decorate([p(cc.Label)],e.prototype,"blackScoreLabel",void 0),__decorate([p(cc.Label)],e.prototype,"whiteScoreLabel",void 0),e=__decorate([a],e)}(cc.Component);i.ReversiScene=h,cc._RF.pop()},{"../G":"G","./ReversiAI":"ReversiAI","./ReversiBoard":"ReversiBoard","./ReversiConstants":"ReversiConstants"}],SnakeBoard:[function(t,e,i){"use strict";cc._RF.push(e,"a84adR6dohB5YJuAMwnUu08","SnakeBoard"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./SnakeConstants"),r=t("./SnakePiece"),s=cc._decorator,c=s.ccclass,n=s.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frameTime=.5,e.levelRatio=.05,e.piecePrefab=null,e.layout=null,e.isStart=!1,e.pastTime=0,e.rowsNum=16,e.colsNum=16,e.gridWidth=0,e.moveDir=o.DIRECTION.RIGHT,e.level=0,e.snakeScene=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.gridWidth=this.layout.width/this.colsNum,this.pieceMap=[];for(var t=0;t<this.colsNum;t++){this.pieceMap[t]=[];for(var e=0;e<this.rowsNum;e++){var i=cc.instantiate(this.piecePrefab);this.layout.addChild(i),i.width=this.gridWidth,i.height=this.gridWidth,i.x=t*this.gridWidth+i.width/2,i.y=e*this.gridWidth+i.height/2,this.pieceMap[t][e]=i.getComponent(r.Piece),this.pieceMap[t][e].x=t,this.pieceMap[t][e].y=e}}},e.prototype.updateTick=function(){this.unschedule(this.tickHandler);var t=this.frameTime-this.levelRatio*this.level;t<.1&&(t=.1),this.schedule(this.tickHandler,t)},e.prototype.tickHandler=function(){this.isStart&&this.moveSnake()},e.prototype.init=function(t){this.snakeScene=t},e.prototype.startGame=function(){this.reset();for(var t=0;t<10;t++)this.addFood();this.isStart=!0,this.updateTick()},e.prototype.reset=function(){this.clear(),this.snake=[],this.pieceMap[9][9].init(o.PIECE_TYPE.SNAKE_HEAD,o.DIRECTION.RIGHT,o.DIRECTION.RIGHT),this.pieceMap[8][9].init(o.PIECE_TYPE.SNAKE_BODY,o.DIRECTION.RIGHT,o.DIRECTION.RIGHT),this.pieceMap[7][9].init(o.PIECE_TYPE.SNAKE_BODY,o.DIRECTION.RIGHT,o.DIRECTION.UP),this.pieceMap[7][8].init(o.PIECE_TYPE.SNAKE_TAIL,o.DIRECTION.UP,o.DIRECTION.UP),this.snake.push(this.pieceMap[9][9]),this.snake.push(this.pieceMap[8][9]),this.snake.push(this.pieceMap[7][9]),this.snake.push(this.pieceMap[7][8]),this.moveDir=o.DIRECTION.RIGHT,this.level=0},e.prototype.addFood=function(){for(var t=[],e=0;e<this.colsNum;e++)for(var i=0;i<this.rowsNum;i++)this.pieceMap[e][i].type===o.PIECE_TYPE.BLANK&&t.push(this.pieceMap[e][i]);t[Math.random()*t.length|0].type=o.PIECE_TYPE.FOOD},e.prototype.clear=function(){for(var t=0;t<this.colsNum;t++)for(var e=0;e<this.rowsNum;e++)this.pieceMap[t][e].type=o.PIECE_TYPE.BLANK},e.prototype.updateLevel=function(t){t!==this.level&&(this.level=t,this.updateTick())},e.prototype.turnSnake=function(t){this.snake[0].outDir!==-t&&(this.moveDir=t)},e.prototype.moveSnake=function(){var t,e=this.snake[0];switch(e.inDir=this.snake[1].outDir,e.outDir=this.moveDir,e.outDir){case o.DIRECTION.UP:t=e.y===this.rowsNum-1?this.pieceMap[e.x][0]:this.pieceMap[e.x][e.y+1];break;case o.DIRECTION.RIGHT:t=e.x===this.colsNum-1?this.pieceMap[0][e.y]:this.pieceMap[e.x+1][e.y];break;case o.DIRECTION.DOWN:t=0===e.y?this.pieceMap[e.x][this.rowsNum-1]:this.pieceMap[e.x][e.y-1];break;case o.DIRECTION.LEFT:t=0===e.x?this.pieceMap[this.colsNum-1][e.y]:this.pieceMap[e.x-1][e.y]}this.moveSnakeToPiece(t)},e.prototype.moveSnakeToPiece=function(t){var e=this.snake[0];switch(t.type){case o.PIECE_TYPE.SNAKE_BODY:case o.PIECE_TYPE.SNAKE_TAIL:this.isStart=!1,this.snakeScene.overGame();break;case o.PIECE_TYPE.FOOD:t.init(o.PIECE_TYPE.SNAKE_HEAD,e.outDir,e.inDir),e.init(o.PIECE_TYPE.SNAKE_BODY,e.outDir,e.inDir),this.snake.unshift(t),this.snakeScene.onEatFood();break;case o.PIECE_TYPE.BLANK:var i=[];this.snake.forEach(function(e,r){switch(e.type){case o.PIECE_TYPE.SNAKE_HEAD:t.init(o.PIECE_TYPE.SNAKE_HEAD,e.outDir,e.inDir);break;case o.PIECE_TYPE.SNAKE_BODY:t.init(o.PIECE_TYPE.SNAKE_BODY,t.outDir,e.outDir);break;case o.PIECE_TYPE.SNAKE_TAIL:t.init(o.PIECE_TYPE.SNAKE_TAIL,t.outDir,e.outDir),e.type=o.PIECE_TYPE.BLANK}i.push(t),t=e}),this.snake=i}},__decorate([n(cc.Float)],e.prototype,"frameTime",void 0),__decorate([n(cc.Float)],e.prototype,"levelRatio",void 0),__decorate([n(cc.Prefab)],e.prototype,"piecePrefab",void 0),__decorate([n(cc.Node)],e.prototype,"layout",void 0),e=__decorate([c],e)}(cc.Component);i.default=a,cc._RF.pop()},{"./SnakeConstants":"SnakeConstants","./SnakePiece":"SnakePiece"}],SnakeConstants:[function(t,e,i){"use strict";var o,r;cc._RF.push(e,"f3022Uj6HRLv61LrPccRv/n","SnakeConstants"),Object.defineProperty(i,"__esModule",{value:!0}),(o=i.DIRECTION||(i.DIRECTION={}))[o.LEFT=-1]="LEFT",o[o.UP=-2]="UP",o[o.RIGHT=1]="RIGHT",o[o.DOWN=2]="DOWN",(r=i.PIECE_TYPE||(i.PIECE_TYPE={}))[r.BLANK=0]="BLANK",r[r.FOOD=1]="FOOD",r[r.SNAKE_HEAD=2]="SNAKE_HEAD",r[r.SNAKE_BODY=3]="SNAKE_BODY",r[r.SNAKE_TAIL=5]="SNAKE_TAIL",cc._RF.pop()},{}],SnakePiece:[function(t,e,i){"use strict";cc._RF.push(e,"00d12WpVXdPwalrhrKeGbMH","SnakePiece"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./SnakeConstants"),r=cc._decorator,s=r.ccclass,c=r.property,n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e.picFood=null,e.picSnakeHeadRight=null,e.picSnakeBodyH=null,e.picSnakeJointRight=null,e.picSnakeTailUp=null,e.x=0,e.y=0,e._inDir=o.DIRECTION.RIGHT,e._outDir=o.DIRECTION.RIGHT,e}return __extends(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this.render()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inDir",{get:function(){return this._inDir},set:function(t){this._inDir=t,this.render()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outDir",{get:function(){return this._outDir},set:function(t){this._outDir=t,this.render()},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e,i){void 0===e&&(e=o.DIRECTION.RIGHT),void 0===i&&(i=o.DIRECTION.RIGHT),this._type=t,this._inDir=i,this._outDir=e,this.render()},e.prototype.render=function(){switch(this.type){case o.PIECE_TYPE.BLANK:this.sprite.spriteFrame=null,this.rotateOther();break;case o.PIECE_TYPE.FOOD:this.sprite.spriteFrame=this.picFood,this.rotateOther();break;case o.PIECE_TYPE.SNAKE_HEAD:this.sprite.spriteFrame=this.picSnakeHeadRight,this.rotateHeadByDir(this.outDir);break;case o.PIECE_TYPE.SNAKE_BODY:this.inDir===this.outDir?(this.sprite.spriteFrame=this.picSnakeBodyH,this.rotateBodyByDir(this.outDir)):(this.sprite.spriteFrame=this.picSnakeJointRight,this.rotateJointByDir(this.inDir,this.outDir));break;case o.PIECE_TYPE.SNAKE_TAIL:this.sprite.spriteFrame=this.picSnakeTailUp,this.rotateTailByDir(this.outDir);break;default:cc.error("wrong piece type!")}},e.prototype.rotateHeadByDir=function(t){switch(t){case o.DIRECTION.RIGHT:this.node.rotation=0;break;case o.DIRECTION.DOWN:this.node.rotation=90;break;case o.DIRECTION.LEFT:this.node.rotation=180;break;case o.DIRECTION.UP:this.node.rotation=270}},e.prototype.rotateBodyByDir=function(t){switch(t){case o.DIRECTION.RIGHT:this.node.rotation=0;break;case o.DIRECTION.LEFT:this.node.rotation=180;break;case o.DIRECTION.DOWN:this.node.rotation=90;case o.DIRECTION.UP:this.node.rotation=270}},e.prototype.rotateJointByDir=function(t,e){t===o.DIRECTION.UP&&e===o.DIRECTION.RIGHT||t===o.DIRECTION.LEFT&&e===o.DIRECTION.DOWN?this.node.rotation=0:t===o.DIRECTION.RIGHT&&e===o.DIRECTION.DOWN||t===o.DIRECTION.UP&&e===o.DIRECTION.LEFT?this.node.rotation=90:t===o.DIRECTION.RIGHT&&e===o.DIRECTION.UP||t===o.DIRECTION.DOWN&&e===o.DIRECTION.LEFT?this.node.rotation=180:(t===o.DIRECTION.DOWN&&e===o.DIRECTION.RIGHT||t===o.DIRECTION.LEFT&&e===o.DIRECTION.UP)&&(this.node.rotation=270)},e.prototype.rotateTailByDir=function(t){switch(t){case o.DIRECTION.UP:this.node.rotation=0;break;case o.DIRECTION.RIGHT:this.node.rotation=90;break;case o.DIRECTION.DOWN:this.node.rotation=180;break;case o.DIRECTION.LEFT:this.node.rotation=270}},e.prototype.rotateOther=function(){this.node.rotation=0},__decorate([c(cc.Sprite)],e.prototype,"sprite",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"picFood",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"picSnakeHeadRight",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"picSnakeBodyH",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"picSnakeJointRight",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"picSnakeTailUp",void 0),e=__decorate([s],e)}(cc.Component);i.Piece=n,cc._RF.pop()},{"./SnakeConstants":"SnakeConstants"}],SnakeScene:[function(t,e,i){"use strict";cc._RF.push(e,"2b466sS/aBAA5gHjzWJtbJX","SnakeScene"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./SnakeBoard"),r=t("./SnakeConstants"),s=t("../G"),c=cc._decorator,n=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scoreLabel=null,e.board=null,e.score=0,e}return __extends(e,t),e.prototype.start=function(){var t=this;this.board.init(this),s.G.gameRoot.showTip("四方向手势滑动"),this.startGame(),this.node.on(cc.Node.EventType.TOUCH_END,function(e){var i=e.getStartLocation(),o=e.getLocation(),r=o.x-i.x,s=o.y-i.y;Math.abs(r)>Math.abs(s)?r>0?t.onBtnRight():t.onBtnLeft():s>0?t.onBtnUp():t.onBtnDown()},this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){switch(e.keyCode){case cc.KEY.left:case cc.KEY.a:t.onBtnLeft();break;case cc.KEY.right:case cc.KEY.d:t.onBtnRight();break;case cc.KEY.up:case cc.KEY.w:t.onBtnUp();break;case cc.KEY.down:case cc.KEY.s:t.onBtnDown()}},this)},e.prototype.startGame=function(){this.score=0,this.scoreLabel.string=this.score+"",this.board.startGame()},e.prototype.overGame=function(){s.G.gameRoot.showMaskMessage("你吃了"+this.score+"坨",{label:"厉害了"})},e.prototype.onEatFood=function(){this.score+=1,this.scoreLabel.string=this.score+"",this.board.addFood();var t=this.score/10|0;this.board.updateLevel(t)},e.prototype.onBtnLeft=function(){this.board.turnSnake(r.DIRECTION.LEFT)},e.prototype.onBtnRight=function(){this.board.turnSnake(r.DIRECTION.RIGHT)},e.prototype.onBtnUp=function(){this.board.turnSnake(r.DIRECTION.UP)},e.prototype.onBtnDown=function(){this.board.turnSnake(r.DIRECTION.DOWN)},e.prototype.onBtnReturn=function(){s.G.returnHall()},e.prototype.onBtnRestart=function(){this.startGame()},__decorate([a(cc.Label)],e.prototype,"scoreLabel",void 0),__decorate([a(o.default)],e.prototype,"board",void 0),e=__decorate([n],e)}(cc.Component);i.SnakeScene=p,cc._RF.pop()},{"../G":"G","./SnakeBoard":"SnakeBoard","./SnakeConstants":"SnakeConstants"}],Streak:[function(t,e,i){"use strict";cc._RF.push(e,"7d2a9UGfIdOHJj/cCvXlEIj","Streak"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,s=o.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.g=null,e}return __extends(e,t),e.prototype.start=function(){this.node.parent.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.parent.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.parent.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.parent.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.parent.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.onTouchStart=function(t){var e=this.node.parent.convertToNodeSpaceAR(t.getLocation());this.g.circle(e.x,e.y,5),this.g.fill(),this.g.moveTo(e.x,e.y)},e.prototype.onTouchMove=function(t){var e=this.node.parent.convertToNodeSpaceAR(t.getLocation());this.g.lineTo(e.x,e.y),this.g.stroke(),this.g.moveTo(e.x,e.y)},e.prototype.onTouchEnd=function(t){var e=this.node.parent.convertToNodeSpaceAR(t.getLocation());this.g.circle(e.x,e.y,5),this.g.fill(),this.g.clear()},__decorate([s(cc.Graphics)],e.prototype,"g",void 0),e=__decorate([r],e)}(cc.Component);i.Streak=c,cc._RF.pop()},{}],TetrisBoard:[function(t,e,i){"use strict";cc._RF.push(e,"c50e6LtA35NprKFbQ2Byit0","TetrisBoard"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./TetrisPiece"),r=cc._decorator,s=r.ccclass,c=r.property,n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.colsNum=0,e.piecePrefab=null,e.frameTime=1,e.isStart=!1,e.pastTime=0,e.rowsNum=0,e.gridWidth=0,e.player={pos:cc.v2(0,0),matrix:null,score:0},e.nextBlock="囧",e}return __extends(e,t),e.prototype.onLoad=function(){this.gridWidth=this.node.width/this.colsNum,this.rowsNum=cc.director.getVisibleSize().height/this.gridWidth|0,this.pieceMap=[];for(var t=0;t<this.rowsNum;t++){this.pieceMap[t]=[];for(var e=0;e<this.colsNum;e++){var i=cc.instantiate(this.piecePrefab);this.node.addChild(i),i.width=this.gridWidth,i.height=this.gridWidth,i.x=e*this.gridWidth+i.width/2,i.y=t*this.gridWidth+i.height/2,this.pieceMap[t][e]=i.getComponent(o.Piece)}}},e.prototype.init=function(t){this.tetrisScene=t},e.prototype.reset=function(){this.arena=this.createMatrix(this.colsNum,this.rowsNum),this.playerReset(),this.clear(),this.draw(),this.isStart=!0},e.prototype.stop=function(){this.isStart=!1},e.prototype.clear=function(){for(var t=0;t<this.rowsNum;t++)for(var e=0;e<this.colsNum;e++)this.pieceMap[t][e].hide()},e.prototype.createMatrix=function(t,e){for(var i=[];e--;)i.push(new Array(t).fill(0));return i},e.prototype.drawMatrix=function(t,e){var i=this;t.forEach(function(t,o){t.forEach(function(t,r){0!==t&&i.pieceMap[o+e.y][r+e.x].show()})})},e.prototype.draw=function(){this.clear(),this.drawMatrix(this.arena,cc.v2(0,0)),this.drawMatrix(this.player.matrix,this.player.pos)},e.prototype.playerReset=function(){if(this.player.matrix=this.createBlock(this.nextBlock),this.player.pos.y=this.rowsNum-this.player.matrix.length,this.player.pos.x=(this.arena[0].length/2|0)-(this.player.matrix[0].length/2|0),this.collide()&&this.tetrisScene.stopGame(this.player.score),Math.random()<.01)this.nextBlock="囧";else{var t="TJLOSZIX";this.nextBlock=t[t.length*Math.random()|0]}this.tetrisScene.updateHint(this.nextBlock)},e.prototype.playerDrop=function(){this.player.pos.y--,this.collide()&&(this.player.pos.y++,this.merge(),this.playerReset(),this.arenaSweep(),this.tetrisScene.updateScore(this.player.score)),this.draw()},e.prototype.playerMove=function(t){this.player.pos.x+=t,this.collide()&&(this.player.pos.x-=t),this.draw()},e.prototype.playerRotate=function(t){var e=this.player.pos.x,i=1;for(this.rotate(this.player.matrix,-t);this.collide();)if(this.player.pos.x+=i,(i=-(i+(i>0?1:-1)))>this.player.matrix.length)return this.rotate(this.player.matrix,t),void(this.player.pos.x=e);this.draw()},e.prototype.arenaSweep=function(){var t=1;t:for(var e=0;e<this.arena.length-1;e++){for(var i=0;i<this.arena[e].length;i++)if(0===this.arena[e][i])continue t;var o=this.arena.splice(e,1)[0].fill(0);this.arena.push(o),e--,this.player.score+=10*t,t*=2}},e.prototype.collide=function(){for(var t=this.player.matrix,e=this.player.pos,i=0;i<t.length;i++)for(var o=0;o<t[i].length;o++)if(0!==t[i][o]&&0!==(this.arena[i+e.y]&&this.arena[i+e.y][o+e.x]))return!0;return!1},e.prototype.merge=function(){var t=this;this.player.matrix.forEach(function(e,i){e.forEach(function(e,o){0!==e&&(t.arena[i+t.player.pos.y][o+t.player.pos.x]=e)})})},e.prototype.rotate=function(t,e){for(var i=0;i<t.length;i++)for(var o=0;o<i;o++)r=[t[i][o],t[o][i]],t[o][i]=r[0],t[i][o]=r[1];var r;e>0?t.forEach(function(t){return t.reverse()}):t.reverse()},e.prototype.createBlock=function(t){return"I"===t?[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]:"L"===t?[[0,2,0],[0,2,0],[0,2,2]]:"J"===t?[[0,3,0],[0,3,0],[3,3,0]]:"O"===t?[[4,4],[4,4]]:"Z"===t?[[5,5,0],[0,5,5],[0,0,0]]:"S"===t?[[0,6,6],[6,6,0],[0,0,0]]:"T"===t?[[0,7,0],[7,7,7],[0,0,0]]:"X"===t?[[1,0,1],[0,1,0],[1,0,1]]:"囧"===t?[[1,1,1,1,1,1,1],[1,0,1,0,1,0,1],[1,1,0,0,0,1,1],[1,0,0,0,0,0,1],[1,0,1,1,1,0,1],[1,0,1,0,1,0,1],[1,1,1,1,1,1,1]].reverse():void 0},e.prototype.update=function(t){this.isStart&&(this.pastTime+=t,this.pastTime>=this.frameTime&&(this.playerDrop(),this.pastTime=0))},__decorate([c(cc.Integer)],e.prototype,"colsNum",void 0),__decorate([c(cc.Prefab)],e.prototype,"piecePrefab",void 0),__decorate([c(cc.Float)],e.prototype,"frameTime",void 0),e=__decorate([s],e)}(cc.Component);i.Board=n,cc._RF.pop()},{"./TetrisPiece":"TetrisPiece"}],TetrisConstants:[function(t,e,i){"use strict";var o;cc._RF.push(e,"5dda65IwMBO4peY9Ktr0VrB","TetrisConstants"),Object.defineProperty(i,"__esModule",{value:!0}),(o=i.STATE||(i.STATE={}))[o.NONE=0]="NONE",o[o.START=1]="START",o[o.OVER=2]="OVER",cc._RF.pop()},{}],TetrisPiece:[function(t,e,i){"use strict";cc._RF.push(e,"8d09eH0obdDS6b119IOSvSi","TetrisPiece"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,s=(o.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.hide=function(){this.node.active=!1},e.prototype.show=function(){this.node.active=!0},e=__decorate([r],e)}(cc.Component));i.Piece=s,cc._RF.pop()},{}],TetrisScene:[function(t,e,i){"use strict";cc._RF.push(e,"f98a8vySGJO/rrzqvUD1fRq","TetrisScene"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./TetrisBoard"),r=t("./TetrisConstants"),s=t("../G"),c=cc._decorator,n=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.board=null,e.scoreLabel=null,e.nextLabel=null,e.state=r.STATE.NONE,e}return __extends(e,t),e.prototype.start=function(){this.addListeners(),this.board.init(this),this.startGame()},e.prototype.startGame=function(){this.state=r.STATE.START,this.board.reset(),this.updateScore(0)},e.prototype.stopGame=function(t){var e=this;this.state=r.STATE.OVER,this.board.stop(),s.G.gameRoot.showMaskMessage("无聊指数："+t,{label:"再来",cb:function(){e.startGame()},target:this},{label:"溜了",cb:function(){s.G.returnHall()},target:this})},e.prototype.updateScore=function(t){this.scoreLabel.string=t+""},e.prototype.updateHint=function(t){this.nextLabel.string=t},e.prototype.onBtnExit=function(){this.board.stop(),s.G.returnHall()},e.prototype.onBtnLeft=function(){this.state===r.STATE.START&&this.board.playerMove(-1)},e.prototype.onBtnRight=function(){this.state===r.STATE.START&&this.board.playerMove(1)},e.prototype.onBtnRotate=function(){this.state===r.STATE.START&&this.board.playerRotate(1)},e.prototype.onBtnDrop=function(){this.state===r.STATE.START&&this.board.playerDrop()},e.prototype.addListeners=function(){var t=this;this.board.node.on(cc.Node.EventType.TOUCH_END,function(e){var i=e.getStartLocation(),o=e.getLocation(),r=o.x-i.x,s=o.y-i.y;Math.abs(r)>Math.abs(s)?r>0?t.onBtnRight():t.onBtnLeft():s>0?t.onBtnRotate():t.onBtnDrop()},this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){switch(e.keyCode){case cc.KEY.left:case cc.KEY.a:t.onBtnLeft();break;case cc.KEY.right:case cc.KEY.d:t.onBtnRight();break;case cc.KEY.up:case cc.KEY.w:t.onBtnRotate();break;case cc.KEY.down:case cc.KEY.s:t.onBtnDrop()}},this)},__decorate([a(o.Board)],e.prototype,"board",void 0),__decorate([a(cc.Label)],e.prototype,"scoreLabel",void 0),__decorate([a(cc.Label)],e.prototype,"nextLabel",void 0),e=__decorate([n],e)}(cc.Component);i.TetrisScene=p,cc._RF.pop()},{"../G":"G","./TetrisBoard":"TetrisBoard","./TetrisConstants":"TetrisConstants"}],Timer:[function(t,e,i){"use strict";cc._RF.push(e,"0e5087jnptHobsyq50wncmT","Timer"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,s=o.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timerLabel=null,e.isRunning=!1,e.time=null,e}return __extends(e,t),e.prototype.run=function(){this.time=0,this.schedule(this.tick,.1)},e.prototype.tick=function(){this.time+=.1,this.timerLabel.string=this.time.toFixed(1)+" s"},e.prototype.stop=function(){this.unschedule(this.tick)},e.prototype.reset=function(){this.time=0,this.timerLabel.string="0.0 s"},__decorate([s(cc.Label)],e.prototype,"timerLabel",void 0),e=__decorate([r],e)}(cc.Component);i.Timer=c,cc._RF.pop()},{}]},{},["M2048Board","M2048Constants","M2048Piece","M2048Scene","G","BrickBall","BrickColor","BrickLayout","BrickPaddle","BrickScene","Get47Board","Get47Constants","Get47Piece","Get47Scene","Get47Score","GobangAI","GobangBoard","GobangConstants","GobangPiece","GobangScene","HallScene","JumpBlock","JumpConstants","JumpPlayer","JumpProgress","JumpScene","JumpStage","LinkBoard","LinkConstants","LinkPiece","LinkScene","LodingScene","MineConstans","MineLevelLabel","MinePiece","MineScene","MnieBoard","PuzzleBoard","PuzzleConstants","PuzzlePiece","PuzzleScene","ReversiAI","ReversiBoard","ReversiConstants","ReversiPiece","ReversiScene","Chess","ChessManager","Constants","GameManager","ReversiMatch","ReversiMenu","GameRoot","Streak","Timer","SnakeBoard","SnakeConstants","SnakePiece","SnakeScene","TetrisBoard","TetrisConstants","TetrisPiece","TetrisScene"]);